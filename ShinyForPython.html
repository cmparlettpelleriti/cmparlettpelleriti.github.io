<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Chelsea Parlett-Pelleriti">

<title>Building a Shiny for Python App</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="ShinyForPython_files/libs/clipboard/clipboard.min.js"></script>
<script src="ShinyForPython_files/libs/quarto-html/quarto.js"></script>
<script src="ShinyForPython_files/libs/quarto-html/popper.min.js"></script>
<script src="ShinyForPython_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ShinyForPython_files/libs/quarto-html/anchor.min.js"></script>
<link href="ShinyForPython_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ShinyForPython_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ShinyForPython_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ShinyForPython_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ShinyForPython_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#shiny" id="toc-shiny" class="nav-link active" data-scroll-target="#shiny"><span class="toc-section-number">1</span>  Shiny</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples"><span class="toc-section-number">2</span>  Examples</a></li>
  <li><a href="#build-your-own-app" id="toc-build-your-own-app" class="nav-link" data-scroll-target="#build-your-own-app"><span class="toc-section-number">3</span>  Build your own App</a>
  <ul class="collapse">
  <li><a href="#parts-of-an-app" id="toc-parts-of-an-app" class="nav-link" data-scroll-target="#parts-of-an-app"><span class="toc-section-number">3.1</span>  Parts of an App</a>
  <ul class="collapse">
  <li><a href="#ui" id="toc-ui" class="nav-link" data-scroll-target="#ui">UI</a></li>
  <li><a href="#server" id="toc-server" class="nav-link" data-scroll-target="#server">Server</a></li>
  </ul></li>
  <li><a href="#adding-to-the-ui" id="toc-adding-to-the-ui" class="nav-link" data-scroll-target="#adding-to-the-ui"><span class="toc-section-number">3.2</span>  Adding to the UI</a></li>
  <li><a href="#adding-to-the-server-function" id="toc-adding-to-the-server-function" class="nav-link" data-scroll-target="#adding-to-the-server-function"><span class="toc-section-number">3.3</span>  Adding to the Server Function</a></li>
  <li><a href="#creating-an-input" id="toc-creating-an-input" class="nav-link" data-scroll-target="#creating-an-input"><span class="toc-section-number">3.4</span>  Creating an Input</a></li>
  <li><a href="#accessing-user-input-values" id="toc-accessing-user-input-values" class="nav-link" data-scroll-target="#accessing-user-input-values"><span class="toc-section-number">3.5</span>  Accessing User Input Values</a></li>
  <li><a href="#adding-further-inputs" id="toc-adding-further-inputs" class="nav-link" data-scroll-target="#adding-further-inputs"><span class="toc-section-number">3.6</span>  Adding Further Inputs</a></li>
  <li><a href="#another-input-option" id="toc-another-input-option" class="nav-link" data-scroll-target="#another-input-option"><span class="toc-section-number">3.7</span>  Another Input Option</a></li>
  <li><a href="#boolean-inputs" id="toc-boolean-inputs" class="nav-link" data-scroll-target="#boolean-inputs"><span class="toc-section-number">3.8</span>  Boolean Inputs</a></li>
  <li><a href="#additional-ui" id="toc-additional-ui" class="nav-link" data-scroll-target="#additional-ui"><span class="toc-section-number">3.9</span>  Additional UI</a></li>
  <li><a href="#external-packages" id="toc-external-packages" class="nav-link" data-scroll-target="#external-packages"><span class="toc-section-number">3.10</span>  External Packages</a></li>
  </ul></li>
  <li><a href="#more-shiny-features" id="toc-more-shiny-features" class="nav-link" data-scroll-target="#more-shiny-features"><span class="toc-section-number">4</span>  More Shiny Features</a></li>
  <li><a href="#sharing-your-app" id="toc-sharing-your-app" class="nav-link" data-scroll-target="#sharing-your-app"><span class="toc-section-number">5</span>  Sharing your App</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Building a Shiny for Python App</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;Chelsea Parlett-Pelleriti </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<section id="shiny" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Shiny</h1>
<p>Shiny is a wonderful tool for building <em>interactive</em> web apps using python! R lovers may be familiar with the original Shiny package in R, but now Shiny works with python too! Shiny uses <em>reactivity</em> to update your application when users change different inputs, and provides numerous tools to build a beautiful Graphical User Interface (GUI) that can be used as a Dashboard, a Presentation, or even a Pedagodical activity! Shiny allows you to interface with all of your favorite python packages like pandas, seaborn, plotnine, sklearn, and keras!</p>
<p>Here are some links weâ€™ll need for this tutorial:</p>
<ul>
<li><a href="https://shiny.rstudio.com/py/">Shiny for Python Website</a></li>
<li><a href="https://raw.githubusercontent.com/cmparlettpelleriti/CPSC392ParlettPelleriti/master/Data/iris.csv">Iris Data</a></li>
<li><a href="https://www.webfx.com/tools/emoji-cheat-sheet/">Emoji Index</a></li>
</ul>
</section>
<section id="examples" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Examples</h1>
<ul>
<li><a href="https://shinylive.io/py/examples/#wordle">Wordle</a></li>
<li><a href="https://shinylive.io/py/examples/#regularization">Regularization</a></li>
<li><a href="https://shinylive.io/py/examples/#cpu-info">CPU Usage</a></li>
<li>Binomial</li>
</ul>
<div class="cell" data-execution_count="1">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sre_parse <span class="im">import</span> fix_flags</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> <span class="op">*</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> emoji <span class="co"># for frog emojis on buttons</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Import plotting libraries</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># app</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># intro text</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    ui.h2(<span class="st">"Frog Jump Binomial"</span>),</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    ui.p(<span class="st">"There's a very tiny frog, called the pumpkin toadlet, which is barely bigger than a skittle!</span><span class="ch">\</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="st">     The pumpkin toadlet is so small that when it jumps, it can't always land on its feet. Use the buttons</span><span class="ch">\</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="st">      below to make the frog jump (once, or 10 times)! Then, look at the plot to see how often it lands rightside up.</span><span class="ch">\</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="st">       Once you've run it a few times, try to guess the proportion/probability (0-never, 1-always) the frog lands rightside up, in general."</span>),</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    ui.tags.br(),</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># inputs (both action buttons)</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    ui.input_action_button(<span class="st">"btn"</span>, emoji.emojize(<span class="st">":frog: JUMP!"</span>)),</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    ui.input_action_button(<span class="st">"btn10"</span>, emoji.emojize(<span class="st">":frog: JUMP 10x!"</span>)),</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    ui.tags.br(),</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    ui.tags.br(),</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># output (text, two plots)</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    ui.h3(<span class="st">"Frog Jump Attempts:"</span>),</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    ui.output_text(<span class="st">"description"</span>),</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    ui.h4(<span class="st">"All Frog Jump Trials"</span>),</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    ui.p(<span class="st">"This plot shows the proportion of times the pumpkin toadlet jumped and landed, and the proportion of times it fell on it's little frog face. </span><span class="ch">\</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="st">    This graph uses data from both the single and 10x jump buttoms together to show the overall distribution of successes and failures. As you simulate more </span><span class="ch">\</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="st">    and more jumps, what's your best guess for the overall probability (p) that the frog lands successfully on its feet?"</span>),</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(<span class="st">"counts"</span>, height<span class="op">=</span><span class="st">"300px"</span>),</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    ui.h4(<span class="st">"10x Frog Jump Trials"</span>),</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    ui.p(<span class="st">"When you press the 'JUMP 10x' button, a set of 10 frog jumps are simulated. The number of successes in these sets of 10 </span><span class="ch">\</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="st">    frog jumps will follow a binomial distribution with n trials, and a probability of succes p. As you continue to press the </span><span class="ch">\</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="st">    'JUMP 10x' button, see how the distribution starts to take shape. Are certain numbers of successes more common than others? </span><span class="ch">\</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="st">    Which ones? How does that relate to your guess of p in the previous graph?"</span>),</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(<span class="st">"binom10"</span>, height<span class="op">=</span><span class="st">"300px"</span>),</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>: Inputs, output: Outputs, session: Session):</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># reactive value to store successes/failures using a pandas Data Frame</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    clicks <span class="op">=</span> reactive.Value(pd.DataFrame({<span class="st">"Landed"</span>: [<span class="dv">0</span>], <span class="st">"FellOnFace"</span>: [<span class="dv">0</span>]}))</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># reactive value to store binomial counts when n = 10</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>    binomial10 <span class="op">=</span> reactive.Value(np.zeros(<span class="dv">11</span>))</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    <span class="co"># reactive Effect tied to pressing the single jump button</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">@reactive.Effect</span>()</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">@reactive.event</span>(<span class="bu">input</span>.btn)</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> _():</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>        <span class="co"># simulate one jump</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>        landed <span class="op">=</span> np.random.binomial(n <span class="op">=</span> <span class="dv">1</span>, p <span class="op">=</span> <span class="fl">0.7</span>)</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>        <span class="co"># create temporary copy of clicks</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>        clicks_tmp <span class="op">=</span> clicks.get().copy()</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>        <span class="co"># change temp variable</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> landed:</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>            clicks_tmp[<span class="st">"Landed"</span>][<span class="dv">0</span>] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>            clicks_tmp[<span class="st">"FellOnFace"</span>][<span class="dv">0</span>] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>        <span class="co"># re-set clicks with modified temporary variable</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>        clicks.<span class="bu">set</span>(clicks_tmp)</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>    <span class="co"># reactive Effect tied to pressing the ten jump button</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">@reactive.Effect</span>()</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">@reactive.event</span>(<span class="bu">input</span>.btn10)</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> _():</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>        <span class="co"># simulate one jump</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>        landed <span class="op">=</span> [np.random.binomial(n <span class="op">=</span> <span class="dv">1</span>, p <span class="op">=</span> <span class="fl">0.7</span>) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">10</span>)]</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>        <span class="co"># count successes</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>        successes <span class="op">=</span> <span class="bu">sum</span>(landed)</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>        <span class="co"># create temporary copy of clicks</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>        clicks_tmp <span class="op">=</span> clicks.get().copy()</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>       <span class="co"># change temp variable</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>        clicks_tmp[<span class="st">"Landed"</span>][<span class="dv">0</span>] <span class="op">+=</span> successes</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>        clicks_tmp[<span class="st">"FellOnFace"</span>][<span class="dv">0</span>] <span class="op">+=</span> (<span class="dv">10</span> <span class="op">-</span> successes)</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>        <span class="co"># re-set clicks with modified temporary variable   </span></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>        clicks.<span class="bu">set</span>(clicks_tmp)</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>        <span class="co"># create temporary copy of binomial10</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>        binomial10_tmp <span class="op">=</span> binomial10.get().copy()</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>        <span class="co"># change temp variable</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>        binomial10_tmp[successes] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>        <span class="co"># re-set binomial10 with modified temporary variable</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>        binomial10.<span class="bu">set</span>(binomial10_tmp)</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span>()</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.text</span>()</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> description():</span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>        <span class="co"># grab success/failure values</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>        made_it <span class="op">=</span> clicks.get()[<span class="st">"Landed"</span>][<span class="dv">0</span>]</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>        fell <span class="op">=</span> clicks.get()[<span class="st">"FellOnFace"</span>][<span class="dv">0</span>]</span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>        nclicks <span class="op">=</span> made_it <span class="op">+</span> fell</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>        <span class="co"># return output text</span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="ss">f"In total, you made the frog jump </span><span class="sc">{</span>nclicks<span class="sc">}</span><span class="ss"> times! On </span><span class="sc">{</span>made_it<span class="sc">}</span><span class="ss"> of those times, the frog landed right side up! But on </span><span class="sc">{</span>fell<span class="sc">}</span><span class="ss"> times, the frog fell flat on its face."</span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span>()</span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.plot</span>()</span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> counts():</span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>        <span class="co"># grab success/failure values</span></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>        made_it <span class="op">=</span> clicks.get()[<span class="st">"Landed"</span>][<span class="dv">0</span>]</span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>        fell <span class="op">=</span> clicks.get()[<span class="st">"FellOnFace"</span>][<span class="dv">0</span>]</span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>        nclicks <span class="op">=</span> made_it <span class="op">+</span> fell</span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>        <span class="co"># create data frame for plot </span></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> nclicks <span class="op">==</span> <span class="dv">0</span>: <span class="co"># if no button clicks have been recorded</span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span> pd.DataFrame({<span class="st">"outcome"</span>: [<span class="st">"Rightside Up"</span>, <span class="st">"Upside Down"</span>],</span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"count"</span>: [<span class="dv">0</span>, <span class="dv">0</span>]})</span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span> pd.DataFrame({<span class="st">"outcome"</span>: [<span class="st">"Rightside Up"</span>, <span class="st">"Upside Down"</span>],</span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"count"</span>: [made_it<span class="op">/</span>nclicks, fell<span class="op">/</span>nclicks]})</span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>        <span class="co"># create plot and modify aesthetics</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>        fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>        sns.set_theme(style <span class="op">=</span> <span class="st">"whitegrid"</span>)</span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>        p <span class="op">=</span> sns.barplot(x <span class="op">=</span> <span class="st">"outcome"</span>, y <span class="op">=</span> <span class="st">"count"</span>, data <span class="op">=</span> df)</span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>        p.grid(<span class="va">False</span>)</span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>        p.<span class="bu">set</span>(title <span class="op">=</span> <span class="st">"Frog Jump Counts"</span>, xlabel <span class="op">=</span> <span class="st">""</span>,</span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>        ylabel <span class="op">=</span> <span class="st">"Proportion"</span>,</span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>        ylim <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>])</span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a>        plt.subplots_adjust(top<span class="op">=</span><span class="fl">0.86</span>,</span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a>        bottom <span class="op">=</span> <span class="fl">0.2</span>)</span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> fig</span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span>()</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.plot</span>()</span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> binom10():</span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>        <span class="co"># grab success/failure values</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>        made_it <span class="op">=</span> clicks.get()[<span class="st">"Landed"</span>][<span class="dv">0</span>]</span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>        fell <span class="op">=</span> clicks.get()[<span class="st">"FellOnFace"</span>][<span class="dv">0</span>]</span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>        nclicks <span class="op">=</span> made_it <span class="op">+</span> fell</span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>        <span class="co"># create data frame for plot </span></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> nclicks <span class="op">==</span> <span class="dv">0</span>: <span class="co"># if no button clicks have been recorded</span></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span> pd.DataFrame({<span class="st">"N_success"</span>:<span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">11</span>)), <span class="st">"count"</span>: np.zeros(<span class="dv">11</span>) })</span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span>  pd.DataFrame({<span class="st">"N_success"</span>: <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">11</span>)), <span class="st">"count"</span>: binomial10.get()})</span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>        <span class="co"># create plot and modify aesthetics</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a>        fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>        sns.set_theme(style <span class="op">=</span> <span class="st">"whitegrid"</span>)</span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a>        p <span class="op">=</span> sns.barplot(x <span class="op">=</span> <span class="st">"N_success"</span>, y <span class="op">=</span> <span class="st">"count"</span>, data <span class="op">=</span> df)</span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a>        p.grid(<span class="va">False</span>)</span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>        p.<span class="bu">set</span>(title <span class="op">=</span> <span class="st">"Binomial Distribution when Jumps = 10"</span>, xlabel <span class="op">=</span> <span class="st">"Number of Successes Out of 10"</span>,</span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>        ylabel <span class="op">=</span> <span class="st">"Count"</span>)</span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a>        plt.subplots_adjust(top<span class="op">=</span><span class="fl">0.86</span>,</span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a>        bottom <span class="op">=</span> <span class="fl">0.2</span>)</span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> fig</span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li>IRT</li>
</ul>
<div class="cell" data-execution_count="2">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> <span class="op">*</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># function to create a data frame for the logistic curve line plot</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># takes in 3 item-level parameters, outputs df to plot</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> irt(a,b,c):</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    theta <span class="op">=</span> np.linspace(<span class="op">-</span><span class="dv">10</span>,<span class="dv">10</span>, num <span class="op">=</span> <span class="dv">500</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    exponent <span class="op">=</span> np.exp(a<span class="op">*</span>(theta<span class="op">-</span>b))</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    phat <span class="op">=</span> c <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>c)<span class="op">*</span>(exponent<span class="op">/</span>(<span class="dv">1</span> <span class="op">+</span> exponent))</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(pd.DataFrame({<span class="st">"p"</span>: phat,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"theta"</span>: theta,</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"a"</span>: a,</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"b"</span>: b,</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"c"</span>: c}))</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co"># app</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add fixed panel that will remain at the top of the page, even while scrolling</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    ui.panel_fixed(</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>        ui.h2({<span class="st">"style"</span>: <span class="st">"text-align: center; background-color: white;"</span>}, <span class="st">"Item Response Theory: Logistic Curves"</span>),</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        ui.div(</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>            ui.div(</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>                <span class="co"># set up 3 input sliders, 1 per parameter</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>                ui.input_slider(<span class="st">"a"</span>, <span class="st">"Discrimination"</span>, <span class="bu">min</span><span class="op">=</span><span class="dv">0</span>, <span class="bu">max</span><span class="op">=</span><span class="dv">10</span>, value<span class="op">=</span><span class="dv">1</span>),</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>                ui.input_slider(<span class="st">"b"</span>, <span class="st">"Difficulty"</span>, <span class="bu">min</span><span class="op">=-</span><span class="dv">5</span>, <span class="bu">max</span><span class="op">=</span><span class="dv">5</span>, value<span class="op">=</span><span class="dv">0</span>),</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>                ui.input_slider(<span class="st">"c"</span>, <span class="st">"Guessing Probability"</span>, <span class="bu">min</span><span class="op">=</span><span class="dv">0</span>, <span class="bu">max</span><span class="op">=</span><span class="dv">1</span>, value<span class="op">=</span><span class="dv">0</span>),</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>            <span class="co"># place plot output, set height to 300px</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>            ui.output_plot(<span class="st">"distPlot"</span>, height<span class="op">=</span><span class="st">"300px"</span>),</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>            style<span class="op">=</span><span class="st">"display:flex; align-items:center; padding: 0 5%; gap: 1rem; background-color: white;"</span>,</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>        height<span class="op">=</span><span class="st">"100%"</span>,</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>        right<span class="op">=</span><span class="st">"0px"</span>,</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        left<span class="op">=</span><span class="st">"0px"</span>,</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    ui.div(style<span class="op">=</span><span class="st">"height:400px"</span>),</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># text row, contains two columns of equal widths</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    ui.row(</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>        ui.column(<span class="dv">6</span>,</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>            ui.h3(<span class="st">"IRT Overview"</span>),</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>            ui.p(<span class="st">'''</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a><span class="st">            Item Response Theory (IRT) is "a paradigm for the design, analysis, and scoring</span><span class="ch">\</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a><span class="st">            of tests, questionnaires, and similar instruments measuring abilities, attitudes, or other variables."</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a><span class="st">            As the name suggests, we are very interested in the items of the test. Imagine a </span><span class="ch">\</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a><span class="st">            multiple choice history test where each question has four options, A,B,C, and D. The "outputs" of that</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a><span class="st">            test are whether or not someone got each question correct. And that "output" is</span><span class="ch">\</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a><span class="st">            the product of at least two things: The underlying history ability of the test taker, and </span><span class="ch">\</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a><span class="st">            the difficulty of the question.</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a><span class="st">            IRT combines these two things into a single model so that we can reason about </span><span class="ch">\</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a><span class="st">            both the test takers (subjects), and the questions (items). The three item-level parameters </span><span class="ch">\</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a><span class="st">            Discrimination, Difficulty, and Guessing, change the logistic curve that predicts the probability </span><span class="ch">\</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a><span class="st">            of getting the question correct depending on the test-taker's underlying ability.</span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a><span class="st">            '''</span>),</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>            ui.h3(<span class="st">"Dynamic Plot Explanation"</span>),</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>                ui.output_text(<span class="st">"txt"</span>),</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>                ui.h4(<span class="st">"Discrimination"</span>),</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>                ui.output_text(<span class="st">"discrim"</span>),</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>                ui.HTML(<span class="st">"&lt;ul&gt;&lt;li&gt;What happens to the curve when you increase it?&lt;li&gt;What </span><span class="ch">\</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a><span class="st">                do you think would happen to the curve if discrimination could be negative?&lt;li&gt;</span><span class="ch">\</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a><span class="st">                What happens to the logistic 'curve' when you make the Discrimination 0?&lt;/ul&gt;"</span>),</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>        ui.column(<span class="dv">6</span>,</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>            ui.h4(<span class="st">"Difficulty"</span>),</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>            ui.output_text(<span class="st">"diff"</span>),</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>            ui.HTML(<span class="st">"&lt;ul&gt;&lt;li&gt;What happens to the curve when you increase Difficulty? Decrease it? &lt;li&gt;</span><span class="ch">\</span></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a><span class="st">            You can find the ability level (x-axis) necessary to have &lt;i&gt;at least&lt;/i&gt; a 50</span><span class="sc">% c</span><span class="st">hance of getting a question</span><span class="ch">\</span></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a><span class="st">             correct by looking at where along the x-axis the curve intersects with the red, dotted line. How does this value </span><span class="ch">\</span></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a><span class="st">            as you change the Difficulty (using the slider)?&lt;/ul&gt;"</span>),</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>            ui.h4(<span class="st">"Guessing"</span>),</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>            ui.output_text(<span class="st">"guessing"</span>),</span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>            ui.HTML(<span class="st">"&lt;ul&gt;&lt;li&gt;What happens to the curve when you increase the Guessing probability?&lt;li&gt;If you have </span><span class="ch">\</span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a><span class="st">            a multiple choice test with 4 choices for each question (A-D), even if a test-taker doesn't even </span><span class="ch">\</span></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a><span class="st">            read the question, what's the probability they could correctly guess the answer? (Move your Guessing slider to </span><span class="ch">\</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a><span class="st">            that value and see how it affects the curve).&lt;/ul&gt;"</span>),</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>: Inputs, output: Outputs, session: Session):</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>    <span class="co"># line plot output</span></span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span>()</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.plot</span>()</span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> distPlot():</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>        <span class="co"># generate data for lineplot using function defined at top of page</span></span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> irt(<span class="bu">input</span>.a(), <span class="bu">input</span>.b(), <span class="bu">input</span>.c())</span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>        <span class="co"># create dynamic title that shows 3 parameter values</span></span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>        title <span class="op">=</span> <span class="ss">f"Logistic Curve with Discrimination = </span><span class="sc">{</span><span class="bu">input</span><span class="sc">.</span>a()<span class="sc">}</span><span class="ss">,</span><span class="ch">\n</span><span class="ss">Difficulty = </span><span class="sc">{</span><span class="bu">input</span><span class="sc">.</span>b()<span class="sc">}</span><span class="ss">, and Guessing = </span><span class="sc">{</span><span class="bu">input</span><span class="sc">.</span>c()<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>        <span class="co"># create plot and change aesthetics</span></span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>        fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>        sns.set_theme(style <span class="op">=</span> <span class="st">"whitegrid"</span>)</span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>        p <span class="op">=</span> sns.lineplot(data <span class="op">=</span> df, x <span class="op">=</span> <span class="st">"theta"</span>, y <span class="op">=</span> <span class="st">"p"</span>, color <span class="op">=</span> <span class="st">"black"</span>)</span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>        p.grid(<span class="va">False</span>)</span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a>        p.<span class="bu">set</span>(title <span class="op">=</span> title, xlabel <span class="op">=</span> <span class="st">"Theta (Latent Ability)"</span>,</span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>        ylabel <span class="op">=</span> <span class="st">"Probability"</span>,</span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>        ylim <span class="op">=</span> (<span class="op">-</span><span class="fl">0.1</span>,<span class="fl">1.1</span>))</span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>        p.axhline(<span class="fl">0.5</span>, linestyle <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"red"</span>, alpha <span class="op">=</span> <span class="fl">0.25</span>)</span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a>        plt.subplots_adjust(top<span class="op">=</span><span class="fl">0.86</span>,</span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>        bottom <span class="op">=</span> <span class="fl">0.2</span>)</span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a>        <span class="co"># return plot for display</span></span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> fig</span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a>    <span class="co"># dynamic text output</span></span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span>()</span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.text</span>()</span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> txt():</span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>        <span class="co"># return text with current values of parameters inserted where necessary</span></span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="ss">f"The plot above shows a logistic curve with Discrimination = </span><span class="sc">{</span><span class="bu">input</span><span class="sc">.</span>a()<span class="sc">}</span><span class="ss">, Difficulty = </span><span class="sc">{</span><span class="bu">input</span><span class="sc">.</span>b()<span class="sc">}</span><span class="ss">, and Guessing = </span><span class="sc">{</span><span class="bu">input</span><span class="sc">.</span>c()<span class="sc">}</span><span class="ss">.</span><span class="ch">\</span></span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a><span class="ss">        In a simple 1,2 or 3 parameter IRT model (1pl, 2pl, 3pl), we use the logistic curve as a way to predict the probability that someone</span><span class="ch">\</span></span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a><span class="ss">        will get a question correct. The Difficulty of the question (here </span><span class="sc">{</span><span class="bu">input</span><span class="sc">.</span>b()<span class="sc">}</span><span class="ss">), shifts the curve either left (when difficulty is low),</span><span class="ch">\</span></span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a><span class="ss">        or right (when difficulty is high). Play around with the slider to the left to see how the logistic curve changes when you change the</span><span class="ch">\</span></span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a><span class="ss">        difficulty. The red line at 0.5 shows where the curve hits a 50% (meaning someone is more likely than not to get this question correct)."</span></span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span>()</span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.text</span>()</span>
<span id="cb2-131"><a href="#cb2-131" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> discrim():</span>
<span id="cb2-132"><a href="#cb2-132" aria-hidden="true" tabindex="-1"></a>        <span class="co"># return text with current values of parameters inserted where necessary</span></span>
<span id="cb2-133"><a href="#cb2-133" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="ss">f'''The Discrimination parameter changes the steepness of the curve. The higher the Discrimination, the steeper the curve (increase the</span><span class="ch">\</span></span>
<span id="cb2-134"><a href="#cb2-134" aria-hidden="true" tabindex="-1"></a><span class="ss">         Discrimination slider to see the change!). When the logistic curve is steeper, a smaller change in a person's ability leads to a larger </span><span class="ch">\</span></span>
<span id="cb2-135"><a href="#cb2-135" aria-hidden="true" tabindex="-1"></a><span class="ss">        change in the predicted probability of getting the question correct. Practically, high discrimination items on a test are better at distinguishing </span><span class="ch">\</span></span>
<span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a><span class="ss">        (aka discriminating) between test-takers at different ability levels. For example, when discrimination is 5, difficulty is 0 and guessing is 0, a test-taker </span><span class="ch">\</span></span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a><span class="ss">        with an ability of -1 (a bit below average) and 1 (a bit above average) would get very different predicted probabilities. Currently, the discrimination is </span><span class="sc">{</span><span class="bu">input</span><span class="sc">.</span>a()<span class="sc">}</span><span class="ss">.'''</span></span>
<span id="cb2-138"><a href="#cb2-138" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-139"><a href="#cb2-139" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span>()</span>
<span id="cb2-140"><a href="#cb2-140" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.text</span>()</span>
<span id="cb2-141"><a href="#cb2-141" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> diff():</span>
<span id="cb2-142"><a href="#cb2-142" aria-hidden="true" tabindex="-1"></a>        <span class="co"># return text with current values of parameters inserted where necessary</span></span>
<span id="cb2-143"><a href="#cb2-143" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="ss">f'''The Difficulty parameter changes the location of the curve on the x-axis. The higher the Difficulty, the more the curve will move</span><span class="ch">\</span></span>
<span id="cb2-144"><a href="#cb2-144" aria-hidden="true" tabindex="-1"></a><span class="ss">         to the right, the lower the Difficulty, the more the curve will move to the left (increase and decrease the Difficulty slider to see the change!). </span><span class="ch">\</span></span>
<span id="cb2-145"><a href="#cb2-145" aria-hidden="true" tabindex="-1"></a><span class="ss">        When the logistic curve is moved to the right, a person needs a higher ability level to have the same probability of getting the question correct </span><span class="ch">\</span></span>
<span id="cb2-146"><a href="#cb2-146" aria-hidden="true" tabindex="-1"></a><span class="ss">        as they did before the curve was moved. In other words, the question is harder!</span><span class="ch">\</span></span>
<span id="cb2-147"><a href="#cb2-147" aria-hidden="true" tabindex="-1"></a><span class="ss">        Currently, the difficulty is </span><span class="sc">{</span><span class="bu">input</span><span class="sc">.</span>b()<span class="sc">}</span><span class="ss">.'''</span></span>
<span id="cb2-148"><a href="#cb2-148" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-149"><a href="#cb2-149" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span>()</span>
<span id="cb2-150"><a href="#cb2-150" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.text</span>()</span>
<span id="cb2-151"><a href="#cb2-151" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> guessing():</span>
<span id="cb2-152"><a href="#cb2-152" aria-hidden="true" tabindex="-1"></a>        <span class="co"># return text with current values of parameters inserted where necessary</span></span>
<span id="cb2-153"><a href="#cb2-153" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="ss">f'''The Guessing parameter changes the lower bound of the curve. When the guessing probability is increased, the lowest predicted probability of </span><span class="ch">\</span></span>
<span id="cb2-154"><a href="#cb2-154" aria-hidden="true" tabindex="-1"></a><span class="ss">        getting a question correct increases, because no matter what a person's ability is, they have some chance of guessing the correct answer. For example, </span><span class="ch">\</span></span>
<span id="cb2-155"><a href="#cb2-155" aria-hidden="true" tabindex="-1"></a><span class="ss">        if you're taking a test of all True/False questions, you have a 50/50 chance of guessing the correct answer, even if you didn't even look at the question.</span><span class="ch">\</span></span>
<span id="cb2-156"><a href="#cb2-156" aria-hidden="true" tabindex="-1"></a><span class="ss">        Currently, the guessing probability is </span><span class="sc">{</span><span class="bu">input</span><span class="sc">.</span>c()<span class="sc">}</span><span class="ss">.'''</span></span>
<span id="cb2-157"><a href="#cb2-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-158"><a href="#cb2-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-159"><a href="#cb2-159" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="build-your-own-app" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Build your own App</h1>
<p><img src="https://posit.co/wp-content/uploads/2023/02/thumbnail-10.png" class="img-fluid"></p>
<p>Letâ€™s import the functions weâ€™ll need from the Shiny Package.</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="parts-of-an-app" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="parts-of-an-app"><span class="header-section-number">3.1</span> Parts of an App</h2>
<p>Shiny Apps have two major parts: the <strong>UI</strong> (which determines how the app should look) and the <strong>server</strong> (which determines how the app should behave).</p>
<section id="ui" class="level3">
<h3 class="anchored" data-anchor-id="ui">UI</h3>
<p>First, letâ€™s start with a basic skeleton for a Shiny App. The app has both a UI component (stored in <code>app_ui</code>) which is using <code>page_fluid</code> to create a basic container for our UI. The UI object tells the app what itâ€™s basic structure should be.</p>
</section>
<section id="server" class="level3">
<h3 class="anchored" data-anchor-id="server">Server</h3>
<p>Then it has a <code>server</code> function, which is going to tell Shiny how to dynamically update. This is where weâ€™ll define any part of our app that might change based on user input.</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># onetime things to load</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>,output,session):</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="adding-to-the-ui" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="adding-to-the-ui"><span class="header-section-number">3.2</span> Adding to the UI</h2>
<p>To start, letâ€™s give our app a title and an output plot where our iris plot will go.</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># onetime things to load</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    ui.h1(<span class="st">"Exploring the Iris Dataset"</span>),</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(<span class="st">"iris"</span>),</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>,output,session):</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can run this code as is, though our plot wonâ€™t show up because we havenâ€™t told the app how to display it in the <code>server</code> function.</p>
</section>
<section id="adding-to-the-server-function" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="adding-to-the-server-function"><span class="header-section-number">3.3</span> Adding to the Server Function</h2>
<p>So, letâ€™s go ahead and do that now! Since our plot is a type of output, weâ€™re going to use the <code>@output</code> and <code>@render.plot()</code> decorators to tell the server that weâ€™re telling it how to construct our iris plot. Weâ€™ll also finally need to load in our data so that our plot can actually plot somehting. Because we want this to happen only ONCE when we open the app, weâ€™re going to load the data right after the import statements, not inside the ui or server portions of the code.</p>
<p>When using Shiny for Pythonâ€™s web interface, weâ€™ll need to upload our <code>iris.csv</code> file so that the app can load in the data. You can do that by clicking the upload button next to all your file tabs.</p>
<p><img src="/images/Upload.png" class="img-fluid"></p>
<p>Weâ€™re going to use <code>seaborn</code> to create a simple scatterplot of the Sepal Lengthâ€™s and Sepal Widths in our data. Under our decorators weâ€™re going to define a function that has the <em>same name</em> as the argument in our <code>output_plot()</code> (in this case, <code>iris</code>). The function should <strong>return</strong> our completed plot.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># onetime things to load</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>my_file <span class="op">=</span> Path(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"iris.csv"</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>irisdf <span class="op">=</span> pd.read_csv(my_file)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    ui.h1(<span class="st">"Exploring the Iris Dataset"</span>),</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(<span class="st">"iris"</span>),</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>,output,session):</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.plot</span>(alt <span class="op">=</span> <span class="st">"A scatter plot of the sepal length and sepal width of various irises"</span>)</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> iris():</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>        p <span class="op">=</span> sns.scatterplot(data <span class="op">=</span> irisdf],</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>                            x <span class="op">=</span> <span class="st">"sepal_length"</span>,</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>                            y <span class="op">=</span> <span class="st">"sepal_width"</span>,</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>                            s <span class="op">=</span> <span class="dv">20</span>).<span class="bu">set</span>(title <span class="op">=</span> <span class="st">"Sepal Length vs. Sepal Width"</span>)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(p)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creating-an-input" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="creating-an-input"><span class="header-section-number">3.4</span> Creating an Input</h2>
<p>Hooray! We finally have a plot. While this is pretty cool, we arenâ€™t taking advantage of Shinyâ€™s awesome dynamic features, weâ€™re just plotting a static plot. Letâ€™s add in a way for users to interact with our graph. First, letâ€™s allow them to change the <em>size</em> of the points in our scatterplot.</p>
<p>To do this, we need to add an <code>input</code> method to our UI. Weâ€™ll use a slider, which creates a sliding scale that the user can use to select a number. Weâ€™ll choose a name for our slider (<code>size</code>), a title for it to display (<code>Choose a Point Size</code>), a <code>min</code>, <code>max</code>, default value (<code>value</code>), and a <code>step_size</code> which determines the ticks on our sliding scale.</p>
</section>
<section id="accessing-user-input-values" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="accessing-user-input-values"><span class="header-section-number">3.5</span> Accessing User Input Values</h2>
<p>Now that the user can interact with our app and choose a size for the points in our scatter plot, we need to <em>use</em> that value they select in our plot. Any input the user changes in an input is stored in a variable that you can use in your <code>server</code> function. To get the size that the user has selected for our points we use <code>input.size()</code>. <code>input</code> tells the app that you want to access the user input, and <code>size</code> is what we named the input coming from our sliding scale. Weâ€™re going to cast <code>input.size()</code> to an <code>int</code> and use it to set the <code>s</code> (or size) argument in our scatterplot. Now, when the user chooses a new value, our plot will dynamically update!</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># onetime things to load</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>my_file <span class="op">=</span> Path(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"iris.csv"</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>irisdf <span class="op">=</span> pd.read_csv(my_file)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    ui.h1(<span class="st">"Exploring the Iris Dataset"</span>),</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    ui.input_slider(<span class="st">"size"</span>, <span class="st">"Choose a Point Size"</span>, <span class="bu">min</span> <span class="op">=</span> <span class="dv">1</span>, <span class="bu">max</span> <span class="op">=</span> <span class="dv">200</span>, value <span class="op">=</span> <span class="dv">15</span>, step <span class="op">=</span> <span class="dv">5</span>),</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(<span class="st">"iris"</span>),</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>,output,session):</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.plot</span>(alt <span class="op">=</span> <span class="st">"A scatter plot of the sepal length and sepal width of various irises"</span>)</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> iris():</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>        p <span class="op">=</span> sns.scatterplot(data <span class="op">=</span> irisdf,</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>                            x <span class="op">=</span> <span class="st">"sepal_length"</span>,</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>                            y <span class="op">=</span> <span class="st">"sepal_width"</span>,</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>                            s <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>.size())).<span class="bu">set</span>(title <span class="op">=</span> <span class="st">"Sepal Length vs. Sepal Width"</span>)</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(p)</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="adding-further-inputs" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="adding-further-inputs"><span class="header-section-number">3.6</span> Adding Further Inputs</h2>
<p>Now that our user can select the size of the points, letâ€™s also let them choose which species of iris theyâ€™d like to see. Weâ€™re going to use a <code>input_select</code> input, which lets users choose from a dropdown menu. Like the sliding scale, an <code>input_select</code> needs a name (<code>species</code>), a display title (<code>Choose a Species</code>), and a dictionary with a list of options. The keys in the dictionary are the exact names of the species as we see them in the data. This is what will be returned to us when we call <code>input.species()</code>. The values in the dictionary are what the user will see in the dropdown menu.</p>
<p>Weâ€™ll then alter our seaborn plot to only use rows of data that match the species the user selected by filtering our data using <code>.loc[]</code>.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># onetime things to load</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>my_file <span class="op">=</span> Path(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"iris.csv"</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>irisdf <span class="op">=</span> pd.read_csv(my_file)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    ui.h1(<span class="st">"Exploring the Iris Dataset"</span>),</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    ui.input_select(<span class="st">"species"</span>, <span class="st">"Choose a Species"</span>,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>                    {<span class="st">"setosa"</span>: <span class="st">"Setosa"</span>,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"versicolor"</span>: <span class="st">"Versicolor"</span>,</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"virginica"</span>:<span class="st">"Virginica"</span>} ),</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    ui.input_slider(<span class="st">"size"</span>, <span class="st">"Choose a Point Size"</span>, <span class="bu">min</span> <span class="op">=</span> <span class="dv">1</span>, <span class="bu">max</span> <span class="op">=</span> <span class="dv">50</span>, value <span class="op">=</span> <span class="dv">15</span>, step <span class="op">=</span> <span class="dv">5</span>),</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(<span class="st">"iris"</span>),</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>,output,session):</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.plot</span>(alt <span class="op">=</span> <span class="st">"A scatter plot of the sepal length and sepal width of various irises"</span>)</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> iris():</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>        p <span class="op">=</span> sns.scatterplot(data <span class="op">=</span> irisdf.loc[irisdf.species <span class="op">==</span> <span class="bu">str</span>(<span class="bu">input</span>.species())],</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>                            x <span class="op">=</span> <span class="st">"sepal_length"</span>,</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>                            y <span class="op">=</span> <span class="st">"sepal_width"</span>,</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>                            s <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>.size())).<span class="bu">set</span>(title <span class="op">=</span> <span class="st">"Sepal Length vs. Sepal Width"</span>)</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(p)</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="another-input-option" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="another-input-option"><span class="header-section-number">3.7</span> Another Input Option</h2>
<p>Wow! That looks excellent. The user can controll both the size of the points AND which species is being shown. But what if they want to see more than one species? We can change our <code>input_select()</code> to an <code>input_selectize()</code> and add the argument <code>multiple = True</code>. Without changing ANYTHING ELSE, we now give our users the option to select multiple species. <code>input.species()</code> will now be a tuple of species, so weâ€™ll change our filtering with <code>.loc[]</code> in the server function as well to allow for multiple species.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># onetime things to load</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>my_file <span class="op">=</span> Path(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"iris.csv"</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>irisdf <span class="op">=</span> pd.read_csv(my_file)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    ui.h1(<span class="st">"Exploring the Iris Dataset"</span>),</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    ui.input_selectize(<span class="st">"species"</span>, <span class="st">"Choose a Species"</span>,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>                    {<span class="st">"setosa"</span>: <span class="st">"Setosa"</span>,</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"versicolor"</span>: <span class="st">"Versicolor"</span>,</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"virginica"</span>:<span class="st">"Virginica"</span>},</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>                      multiple <span class="op">=</span> <span class="va">True</span>),</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    ui.input_slider(<span class="st">"size"</span>, <span class="st">"Choose a Point Size"</span>, <span class="bu">min</span> <span class="op">=</span> <span class="dv">1</span>, <span class="bu">max</span> <span class="op">=</span> <span class="dv">50</span>, value <span class="op">=</span> <span class="dv">15</span>, step <span class="op">=</span> <span class="dv">5</span>),</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(<span class="st">"iris"</span>),</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>,output,session):</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.plot</span>(alt <span class="op">=</span> <span class="st">"A scatter plot of the sepal length and sepal width of various irises"</span>)</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> iris():</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>        p <span class="op">=</span> sns.scatterplot(data <span class="op">=</span> irisdf.loc[irisdf.species.isin(<span class="bu">input</span>.species())],</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>                            x <span class="op">=</span> <span class="st">"sepal_length"</span>,</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>                            y <span class="op">=</span> <span class="st">"sepal_width"</span>,</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>                            s <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>.size()),</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>                            hue <span class="op">=</span> <span class="st">"species"</span>).<span class="bu">set</span>(title <span class="op">=</span> <span class="st">"Sepal Length vs. Sepal Width"</span>)</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(p)</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="boolean-inputs" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="boolean-inputs"><span class="header-section-number">3.8</span> Boolean Inputs</h2>
<p>Gorgeous. Our plot is now able to display multiple species (or none at all), and the user can control the size of the poitns. BUT WHAT IF, they could control other aesthetic options, like sayâ€¦whether or not the different species had different colored dots.</p>
<p>Letâ€™s make an input that allows the user to toggle coloring by species on and off. Weâ€™ll do that using an <code>input_switch()</code>. As always, we need to give this input a name <code>hue</code> and a title <code>Color by Species?</code>. Weâ€™ll also need to give it a default value. Iâ€™ll have this input be <code>True</code> by default.</p>
<p>We can get the current boolean value (<code>True</code> or <code>False</code>) by using <code>input.hue()</code>. Weâ€™ll use this boolean in an <code>if</code> statement in our <code>server</code> function which will give us a plot <em>without</em> different colors if <code>input.hue()</code> is <code>False</code>, and a plot <em>with</em> different colors if <code>input.hue()</code> is <code>True</code>.</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># onetime things to load</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>my_file <span class="op">=</span> Path(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"iris.csv"</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>irisdf <span class="op">=</span> pd.read_csv(my_file)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    ui.h1(<span class="st">"Exploring the Iris Dataset"</span>),</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    ui.input_selectize(<span class="st">"species"</span>, <span class="st">"Choose a Species"</span>,</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>                    {<span class="st">"setosa"</span>: <span class="st">"Setosa"</span>,</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"versicolor"</span>: <span class="st">"Versicolor"</span>,</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"virginica"</span>:<span class="st">"Virginica"</span>},</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>                      multiple <span class="op">=</span> <span class="va">True</span>),</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    ui.input_slider(<span class="st">"size"</span>, <span class="st">"Choose a Point Size"</span>, <span class="bu">min</span> <span class="op">=</span> <span class="dv">1</span>, <span class="bu">max</span> <span class="op">=</span> <span class="dv">50</span>, value <span class="op">=</span> <span class="dv">15</span>, step <span class="op">=</span> <span class="dv">5</span>),</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    ui.input_switch(<span class="st">"hue"</span>, <span class="st">"Color by Species?"</span>, <span class="va">True</span>),</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(<span class="st">"iris"</span>),</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>,output,session):</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.plot</span>(alt <span class="op">=</span> <span class="st">"A scatter plot of the sepal length and sepal width of various irises"</span>)</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> iris():</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">input</span>.hue():</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>            p <span class="op">=</span> sns.scatterplot(data <span class="op">=</span> irisdf.loc[irisdf.species.isin(<span class="bu">input</span>.species())],</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>                                x <span class="op">=</span> <span class="st">"sepal_length"</span>,</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>                                y <span class="op">=</span> <span class="st">"sepal_width"</span>,</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>                                s <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>.size()),</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>                                hue <span class="op">=</span> <span class="st">"species"</span>).<span class="bu">set</span>(title <span class="op">=</span> <span class="st">"Sepal Length vs. Sepal Width"</span>)</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>            p <span class="op">=</span> sns.scatterplot(data <span class="op">=</span> irisdf.loc[irisdf.species.isin(<span class="bu">input</span>.species())],</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>                            x <span class="op">=</span> <span class="st">"sepal_length"</span>,</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>                            y <span class="op">=</span> <span class="st">"sepal_width"</span>,</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>                            s <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>.size())).<span class="bu">set</span>(title <span class="op">=</span> <span class="st">"Sepal Length vs. Sepal Width"</span>)</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(p)</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="additional-ui" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="additional-ui"><span class="header-section-number">3.9</span> Additional UI</h2>
<p>Now that weâ€™ve added some <em>shiny</em> new features to our UI and server, letâ€™s add some static UI to flesh out our app. While you and I are now very familiar with irises and their anatomy, our users may not be. Letâ€™s add a paragraph of text under our plot that explains what sepal length and sepal width are. You can copy the text below:</p>
<pre><code>A sepal is a part of a flowering plant that protects the flower bud and provides support for the flower when it is in bloom.</code></pre>
<p>Underneath our <code>ui.output_plot()</code> weâ€™re going to add a <code>ui.p()</code> which adds a <code>&lt;p&gt;</code> tag (a paragraph) to our UI.</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co"># onetime things to load</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>my_file <span class="op">=</span> Path(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"iris.csv"</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>irisdf <span class="op">=</span> pd.read_csv(my_file)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    ui.h1(<span class="st">"Exploring the Iris Dataset"</span>),</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    ui.input_selectize(<span class="st">"species"</span>, <span class="st">"Choose a Species"</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>                    {<span class="st">"setosa"</span>: <span class="st">"Setosa"</span>,</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"versicolor"</span>: <span class="st">"Versicolor"</span>,</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"virginica"</span>:<span class="st">"Virginica"</span>},</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>                      multiple <span class="op">=</span> <span class="va">True</span>),</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    ui.input_slider(<span class="st">"size"</span>, <span class="st">"Choose a Point Size"</span>, <span class="bu">min</span> <span class="op">=</span> <span class="dv">1</span>, <span class="bu">max</span> <span class="op">=</span> <span class="dv">50</span>, value <span class="op">=</span> <span class="dv">15</span>, step <span class="op">=</span> <span class="dv">5</span>),</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    ui.input_switch(<span class="st">"hue"</span>, <span class="st">"Color by Species?"</span>, <span class="va">True</span>),</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(<span class="st">"iris"</span>),</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    ui.p(<span class="st">"A sepal is a part of a flowering plant that protects the flower bud and provides support for the flower when it is in bloom."</span>)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>,output,session):</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.plot</span>(alt <span class="op">=</span> <span class="st">"A scatter plot of the sepal length and sepal width of various irises"</span>)</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> iris():</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">input</span>.hue():</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>            p <span class="op">=</span> sns.scatterplot(data <span class="op">=</span> irisdf.loc[irisdf.species.isin(<span class="bu">input</span>.species())],</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>                                x <span class="op">=</span> <span class="st">"sepal_length"</span>,</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>                                y <span class="op">=</span> <span class="st">"sepal_width"</span>,</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>                                s <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>.size()),</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>                                hue <span class="op">=</span> <span class="st">"species"</span>).<span class="bu">set</span>(title <span class="op">=</span> <span class="st">"Sepal Length vs. Sepal Width"</span>)</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>            p <span class="op">=</span> sns.scatterplot(data <span class="op">=</span> irisdf.loc[irisdf.species.isin(<span class="bu">input</span>.species())],</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>                            x <span class="op">=</span> <span class="st">"sepal_length"</span>,</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>                            y <span class="op">=</span> <span class="st">"sepal_width"</span>,</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>                            s <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>.size())).<span class="bu">set</span>(title <span class="op">=</span> <span class="st">"Sepal Length vs. Sepal Width"</span>)</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(p)</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="external-packages" class="level2" data-number="3.10">
<h2 data-number="3.10" class="anchored" data-anchor-id="external-packages"><span class="header-section-number">3.10</span> External Packages</h2>
<p>While weâ€™ve built quite an amazing plot using only the packages that are already installed for us, we can also bring in new packages like <code>emoji</code> by adding a file in our Shiny App called <code>requirements.txt</code> and listing the packages we want to install, one per line (this is only necessary when running the Shiny Apps with wasm/pyodide. If youâ€™re running apps locally or on a custom server, you will just need to have the necessary packages installed rather than using <code>requirements.txt</code>).</p>
<p>When our app loads, weâ€™ll also install any package listed in <code>requirements.txt</code> which means we can now use the <code>emoji</code> package in our app! Letâ€™s add a custom flower emoji in the title of our <code>input_selectize()</code>. The <code>emoji</code> package has a function <code>emoji.emojize()</code> which takes in a string containing the name of an emoji surrounded by colons, and returns that string with an emoji so that we can display it. You can see <a href="https://www.webfx.com/tools/emoji-cheat-sheet/">here</a> for a list of all the emoji names. Iâ€™m going to use <code>:blossom"</code>.</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># https://www.webfx.com/tools/emoji-cheat-sheet/</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> emoji</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co"># onetime things to load</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>my_file <span class="op">=</span> Path(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"iris.csv"</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>irisdf <span class="op">=</span> pd.read_csv(my_file)</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    ui.h1(<span class="st">"Exploring the Iris Dataset"</span>),</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    ui.input_selectize(<span class="st">"species"</span>,emoji.emojize(<span class="st">":blossom: Choose a Species"</span>),</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>                    {<span class="st">"setosa"</span>: <span class="st">"Setosa"</span>,</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"versicolor"</span>: <span class="st">"Versicolor"</span>,</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"virginica"</span>:<span class="st">"Virginica"</span>},</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>                      multiple <span class="op">=</span> <span class="va">True</span>),</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    ui.input_slider(<span class="st">"size"</span>, <span class="st">"Choose a Point Size"</span>, <span class="bu">min</span> <span class="op">=</span> <span class="dv">1</span>, <span class="bu">max</span> <span class="op">=</span> <span class="dv">50</span>, value <span class="op">=</span> <span class="dv">15</span>, step <span class="op">=</span> <span class="dv">5</span>),</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    ui.input_switch(<span class="st">"hue"</span>, <span class="st">"Color by Species?"</span>, <span class="va">True</span>),</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(<span class="st">"iris"</span>),</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>    ui.p(<span class="st">"Irises are a type of flower."</span>),</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>,output,session):</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">@output</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">@render.plot</span>(alt <span class="op">=</span> <span class="st">"A scatter plot of the sepal length and sepal width of various irises"</span>)</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> iris():</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">input</span>.hue():</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>            p <span class="op">=</span> sns.scatterplot(data <span class="op">=</span> irisdf.loc[irisdf.species.isin(<span class="bu">input</span>.species())],</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>                                x <span class="op">=</span> <span class="st">"sepal_length"</span>,</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>                                y <span class="op">=</span> <span class="st">"sepal_width"</span>,</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>                                s <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>.size()),</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>                                hue <span class="op">=</span> <span class="st">"species"</span>).<span class="bu">set</span>(title <span class="op">=</span> <span class="st">"Sepal Length vs. Sepal Width"</span>)</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>            p <span class="op">=</span> sns.scatterplot(data <span class="op">=</span> irisdf.loc[irisdf.species.isin(<span class="bu">input</span>.species())],</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>                            x <span class="op">=</span> <span class="st">"sepal_length"</span>,</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>                            y <span class="op">=</span> <span class="st">"sepal_width"</span>,</span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>                            s <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>.size())).<span class="bu">set</span>(title <span class="op">=</span> <span class="st">"Sepal Length vs. Sepal Width"</span>)</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(p)</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wow! We have a beautiful flower in our input title. And we can use this method to install and use any other python package supported by pyodide.</p>
</section>
</section>
<section id="more-shiny-features" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> More Shiny Features</h1>
<p>We just used Shiny for Python to painlessly built a dynamic user interface to explore the iris data using a <code>seaborn</code> plot. But we havenâ€™t even scratched the surface of Shinyâ€™s power. For one, we can have dynamic text that updates based on a userâ€™s selections (see the <code>@render.text()</code>s in the IRT app), or reactive effects that allow us to specify when updates to our output should happen (see <code>@reactive.Effect</code> in the Frog Jump Binomial App). We can also use the <code>ui</code> submodule as well as plain old HTML to customize the look of our app even more (see the formatting in the <a href="https://shinylive.io/py/examples/#regularization">Regularization app</a>). We can even write full on GAMES using Shiny (see the <a href="https://shinylive.io/py/examples/#wordle">Wordle App</a>). I highly recommend you explore both the <a href="">Examples</a> and the <a href="https://shiny.rstudio.com/py/docs/get-started.html">Docs</a> to learn more.</p>
<p><a href="https://shiny.rstudio.com/articles/reactivity-overview.html">Here</a> is an article that talks more about reactive programming, and some of the things that you can do with it.</p>
</section>
<section id="sharing-your-app" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Sharing your App</h1>
<p>Last but not least, I want to talk about something weâ€™ve been using all along: Shiny for Pythonâ€™s serverless development. The Shiny for Python Examples Website is built to use Web Assembly (wasm) and Pyodide so that your apps that you build can run <em>locally in the users browser</em> rather than running on a server. This means you can share apps without setting up or monitoring a server. Shiny for Pythonâ€™s website will encode the entire app into a <em>URL</em> that you can share with others (it is a very long URL thoughâ€¦) When they open that URL, the website will open the app and any associated data and run it <em>locally</em> on the userâ€™s computer. I use this all the time in my classes by sharing a URL on Canvas so that students can do a class activity in the Shiny App without me hosting it on a server.</p>
<p><img src="/images/Share.png" class="img-fluid"></p>
<p>To share your app, Click the <code>Share</code> button at the top right corner of your page (right above the app). This will create two links: One to an <strong>Editor</strong> (which will open the app like we see it now, with the source code on the left and th app on the right) and one to an <strong>Application</strong> (which will open the app full screen in the browser). While the link is long, itâ€™s all you need in order to share your app with others.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>