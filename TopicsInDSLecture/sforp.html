<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.427">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Chelsea Parlett-Pelleriti">

<title>Decision Boundary App with Shiny for Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="sforp_files/libs/clipboard/clipboard.min.js"></script>
<script src="sforp_files/libs/quarto-html/quarto.js"></script>
<script src="sforp_files/libs/quarto-html/popper.min.js"></script>
<script src="sforp_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="sforp_files/libs/quarto-html/anchor.min.js"></script>
<link href="sforp_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="sforp_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="sforp_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="sforp_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="sforp_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#how-shiny-for-python-works" id="toc-how-shiny-for-python-works" class="nav-link" data-scroll-target="#how-shiny-for-python-works">How Shiny for Python Works</a></li>
  <li><a href="#parts-of-a-shiny-app" id="toc-parts-of-a-shiny-app" class="nav-link" data-scroll-target="#parts-of-a-shiny-app">Parts of a Shiny App</a>
  <ul class="collapse">
  <li><a href="#ui" id="toc-ui" class="nav-link" data-scroll-target="#ui">UI</a></li>
  <li><a href="#server" id="toc-server" class="nav-link" data-scroll-target="#server">Server</a></li>
  </ul></li>
  <li><a href="#building-our-app" id="toc-building-our-app" class="nav-link" data-scroll-target="#building-our-app">Building our App</a>
  <ul class="collapse">
  <li><a href="#ui-1" id="toc-ui-1" class="nav-link" data-scroll-target="#ui-1">UI</a>
  <ul class="collapse">
  <li><a href="#h1" id="toc-h1" class="nav-link" data-scroll-target="#h1">H1</a></li>
  <li><a href="#slider" id="toc-slider" class="nav-link" data-scroll-target="#slider">Slider</a></li>
  <li><a href="#output-plot" id="toc-output-plot" class="nav-link" data-scroll-target="#output-plot">Output Plot</a></li>
  </ul></li>
  <li><a href="#server-1" id="toc-server-1" class="nav-link" data-scroll-target="#server-1">Server</a>
  <ul class="collapse">
  <li><a href="#decorators" id="toc-decorators" class="nav-link" data-scroll-target="#decorators">Decorators</a></li>
  </ul></li>
  <li><a href="#optimize-our-app" id="toc-optimize-our-app" class="nav-link" data-scroll-target="#optimize-our-app">Optimize our App</a>
  <ul class="collapse">
  <li><a href="#slider-reload" id="toc-slider-reload" class="nav-link" data-scroll-target="#slider-reload">Slider Reload</a></li>
  <li><a href="#loading-in-the-data" id="toc-loading-in-the-data" class="nav-link" data-scroll-target="#loading-in-the-data">Loading in the Data</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Decision Boundary App with Shiny for Python</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;Chelsea Parlett-Pelleriti </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Today we’re going to use a package called <strong>Shiny for Python</strong> which allows us to build beautiful, interactive web applications using python! Shiny for Python is a great way to present your Machine Learning Analyses to others, especially people without python skills, because it allows them to change outputs and interact with your results without writing any python code. It’s also great for building quick and easy Dashboads.</p>
<p>Check out <a href="https://shinylive.io/py/examples/#regularization">this app I wrote</a> that’s featured on the <strong>Shiny for Python</strong> front page. Or this <a href="https://shinylive.io/py/examples/#wordle">wordle clone</a>.</p>
</section>
<section id="how-shiny-for-python-works" class="level1">
<h1>How Shiny for Python Works</h1>
<p>Shiny for Python is <strong>reactive</strong>. In this context, that means that Shiny for Python keeps track of all the parts of your app, and only re-renders parts that need to change when a user changes their input. Shiny does this by building a <strong>computational graph</strong> that shows how all the parts of your app connect. Any node that’s <em>down stream</em> of a users change will be updated, but the app will not re-render things that are unaffected by the change. This is unlike frameworks like Streamlit which by default re-run apps top to bottom every time users change an input.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="/Users/cparlett/Desktop/PositConfTalk.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">An Example of a Computational Graph</figcaption>
</figure>
</div>
<p>The nice thing about Shiny for Python, is that you don’t have to build that <strong>computational graph</strong> yourself, Shiny for Python infers it based on the structure of your app. So you get the power of reactivity without the stress of managing it yourself.</p>
</section>
<section id="parts-of-a-shiny-app" class="level1">
<h1>Parts of a Shiny App</h1>
<p>Shiny Apps have two major parts: the <strong>UI</strong> (which determines how the app should look) and the <strong>server</strong> (which determines how the app should behave).</p>
<section id="ui" class="level3">
<h3 class="anchored" data-anchor-id="ui">UI</h3>
<p>First, let’s start with a <a href="https://shinylive.io/py/editor/#code=NobwRAdghgtgpmAXGKAHVA6VBPMAaMAYwHsIAXOcpMAYgAIBJGVYgJzLoGUALASwmx0AZmzoAFbGW6k6AZwCuAIxjEAJvIA2cWQB0IQ1sRhy+Aur2ZsOAQXR46rSqrit783vcdRCZXgDc4PQMjOlQoKQ1eRXNLdnFw7j09eiYWONQNYg5nQl5ZXhlFYnkIVShWQSESnwKIIMNjVWiLNI4MrIAROFz80gAhYtLy7CSIFNiOFXUtWWFRdo5HUpd+AHM9Fqs6CHlmQShZiFQNiboYcIXIxSxsBboD0I0yE9a5OCgi1gh72dkIXQgm3SUCGsweqFUo3GrymcEiEFWoW8AGsoKttPUQrJkVpyhAMNB-HAAPqKKDYbQxV4AcSg8lk+RBADk+pjjNjcV8MGRHHAqVsuj1agAVXkAYQ0B3yQl4LjZchx7y58KVxNhGn5cQAMsRVnlfIQAEpwVaOBm1eUcpX4iBwXirbifWZAjgAaSZdodTolUt4Mrl+gaCs5+NQjjDxEI2nyCM1HE4ZBBZVYqk4hCgWlYo2C7MVeKwvFQcP4fJd4kLxdtlrzXJIllkpdO52RJJIGl2EGJPJBshErHgWbq3zoI70aFQxPcdAAvHR3Fg0SShO3eKoABR6Ecj+fcACMa4AlHhN1v5-xUPIyMTZJFnKxD8fh9veBhz5fid5fKRSZeyKQHyez4YMUZAXleCwARAB6jM4QhvKwAT3m+ZD2CBYH2A25qkAeiCAVuI4AAJoZeeH4QRSx3lgmRkIepFbvQ5HvDUAQYHAATkGuyEYKsxDQU++F0HRI6wY8WTEsiEAQIeuH8QJSIMkJglDmO6AznQtioGu46Th48GIfYziKPIqzTqK8hwAeYAAL54OA0DwNQTQ3PgRCkBQVDINCWxTJolJ9qJixOCsCIvFsOx7D82zHICTYXNRVw3Hc4JPKFcQNh8bDfA8fwAmWYSgpFEJQowTZqJWiJhIQqLogCObBtaBJQESpLkpSZa0vSjIQCy1YhtyvJxnQgp5CK4qSua-qDnVVr5iq5RqmVGpljqeqyAaxqmtGFqBliNY2p6jpsM6pzugd3rjdKspTUGM1cmGcARlG5qxmWCZJuUqbppm2Y3XtBZFiqg1iBWKq9Q1dYsA2g3Nq2xDtjAnbdv8fYDjBcBwQsw29BAAwlMm2BrgAGmUKHYCT9hTBTi1drcFkyXh9B1ooJZ0IT9ylHQggk1AeGE4Is4QhgJAQOmNHAMT4R4GT4QALr2FAAAeeRqbufEM3QpofA4ILonQxBwX4GbmbM-kLHhCsAAzEqwOt8rORwYPCsiVXAa4wPwRMk6+mSEMAiB4BbMsHnQAC0dAAKyPnJ0cx3J5wK574Te5GfsB0HdAANQR-Y4UqxbFt8fhCu7tbttqQ7Tsu27HsS2Qye+-7u7p2HkeKbH7fx4nde8D7qdN8HWeR9sux5wXeHq+iHAZhqkP5IoWihMQ-BkLMMia6giT8Zb5eYOG7w0ZbpcInAeC7vnY9b7uO-cj3rvF0f6Kn+fhdbgrxKmquamCx04RQAAYjbeAa4QC1yFnDDsshgCB0QHQS29hQFtggcAJuMDi5WTVvxeg91VC8B8PcDQGoyRVVNIMVQi9l4AnwqgNSUwsCOBwT4Ncb8P6qBfiOZhrBVzAB0GAY4YAZZf1GPhLB1E8IylWPLBWX8ngYAUIoBYshaJDnwtgWY9tMAlF4AAR3MmuaWZBg5CPom8DgbZ5gZjgGQCgeEzGsDUXQbhtAABMAA2AALC48OABmHh9geE0CcVAAAnKoAAHEIXxglaBwCCYQDxPN+F4TCFoKxds6AgFUcAXgMsYG2MgdkuYrBzDmG+DbY+a4tBSVUQeA8VkjEjnoEZHuZCzb8SsTQ6mZBaaZyiUNboI0ZC4yGBUHheEih4zUjlWRosKCsAglI2cCDwEI0gYHew-NWZe0QSs5Bcs27t1jtwcyakeF8MkWpRWBlf5qQ4aueWGgN5QDUhbDAu4o4HI+VuexQ8tDog5rOP+GYGz2GSZYigX8LGpLYXQcZ-y5D-GmeEWZ8y1JLPhv8KBctOaoq2csjFTd3mfM+UctJ+jzmzkuXQbmqLsAgsheCgW9KLJjNIbIyxa5fBkAXrOKx0LYWqEdiaJwFTIzTgAORRnIC4OgWghBkDFfYRQRQ35-g-CLaQrBpxrjeXQF54canj2UVuRwZB5BfDXOIyyNk7KwAQMgIsCJ3AIsILIPwLlhbuTINQPAzt+naDwHkSUpQ8DMwIcSSpqwpBqhgCGnuGhiTOFQFGmAMblyFiLKwcNlBI3cGjSGtQ2A1RSnfj6uACspZKj0BbPA1hnCRBPsKNg6I7GUDwF4oJrzT6hIwAAdi7buDA1avE9vDi86t5wtB4CcfnHteg3m1uLA2ptLgGwQDbR2yOu4e0YDcV2lxg622hPzgeoQcAJ0n2nRbWdEAnE1rrbKPAjbWDNtXXgNxLyvFdoPbuIJ4cD1eKcaOk9Z6LFTpnXoT9C762PuXS2tdeAEMIcvde3dUGH1Ppfa2rx+6+0-owJ+n9Xj-1uKA9W0956wNXr0JHNDS7n0rqwx2z906MAuNPkEsdbbPGcYo8hvQbHaMwfo3Bw9GAgmn23aE-t-6XGAeA7x8DEA+2CYwwxtd7aMC3rw2xn9f7q0eJHQehTVGIBSZU7B19Xi3Gdt3N2t5hHiOGerZR694nzPCdfW4pxB6WNaY4werzpGkOKbPnexdQnMPqckxJmzoT91Dq8ce5zfGIC7nnfeujkW23Ra3fhrtnHh1JeCyZ3ct73NZbcQO+z26dOhO80Oy98nQMpd3JBjLEW1OibY04gdfmB1DqPTx5rIXUPtdUyJqzrGp1VfY92-T76huTpazRsbFmsP7p0zl0JenstFfI8NkrAnVseaw923DHbq26eI0F-bS2QvKeOxV7zkcWPne3fp0di2L0hbM49zrk3d22Z3V26zCW5NkZA3dkrbm-siY8T5gdm6gmg7fY18dB3r3TrC9BvoeQSAn2HRgKTQOCM9pR1ZvbkPvsmZ69jh9uPZD4+y72r9uGj0yaK8ZzHZX2sM6Z14v94m8NadCRdw9lOud6CcW18LfPiAE+7SL2LO321Bclze0bsu8fy9E8T7dIuCuDaMxjqXK2teM51wLvLQOhehPe+Lzjt3qeY6O+bpn76ptA9q0Rod4c1cm5vQ9t3OuPebu3bb+3AGJcB6cb94PBPw9fs2-Vttu4btU5c1LmH8e316q-bbgrv6vuZ4gIlunJ8OheBjRpzdOGJNzbbYBx3GeUtePS+Fyv7xq-66-dVhv7bOcB4A+XvAnfYDrowGHonXb++Jeb+rrxMvoNj5jR723YmQf-o48X1vmvl9V648D3Ll3f3-oAztp3JeBcj5XxP29PWbNBPi2+tPO-FPYZvwfrx3apMsZP4X-3KHa9YdT-LvVHTTL9TddnX3dPBfOPffMAwnHTJjaTBLaPIAiDbPBA8fDTYnDtezUJFHDxQA53PQd9UAnA-dKA79Orf9V-JrDAiASrCg1fF5YnbtQHU-IdbfY3RgrzFgw-S7btKA5-NvdA0gpgpfB9W-NxazezDtc7Z-WQwfPgvfaQr-e3XcfdW3FXc+BgiQkjAQjTWrafH9TjDxFQgw13bA1fGbPDIQlPKzcHPAdXNxIPGw5nagoXHtMXJxIJJzYrFDeA9QxA5-XLIXfzIdEjefAPNxLAkI8fLzPLB-PrALeg9HRg0dEfOXAnDtTbFnWzUQz7fQyjUJajdvHHbXE+D3AgjfWzBvNxOfXg6nMoiAcOHnHPK3S7RPMw67GIqHVo7xbIqo8Ak-SfSjALC2Eg0o6jNQk+HIttazaggg+3Pw8QmYtos3Soi3aogdQHbtZA-rXbN-C2QY6w+nEYjTbo8Ywo-9P3folo6jdwi4nY3PT3H-djH3B3ZojY8OYI+Yy4qg0+DbVAqdbbB434+IgE14pA9jR-cnEdE41olxatQTBYq3XDbQrtFXdIvAS-S9ZEiol493AdZjOwrgt9BbH4gk-jDo7Y-nGrGLIQlXFEiEmkiAFxKQ6Ekk2LCAn9FPd9aY9k9xYYmE-dQHbdAglHWPWAg7ZErY4kkPAdEwk-Rwovak-OZE847ky3P9WvPkikxfWUgY-jZ4nU3Yx-WLBos+JE-jf4jrCbQXYEz3SIttKYtkzU-jKEh0zzAdPAo-IJBo6IjU04vQHtVE2HSzIjJHb9V07DdY9kntIkzLf7BQr9TgwvSwjYntOk9DNbdTPImLPzIo40x4pTLkn01tEjUw7tCI+3SrIUz0pTOYys9TPUmLJHArcMj00MpTBUlMuHbzdgm4ikwLW0pTbU1st4oXfdPAo4wrHs1ontM0qcwnPzI-QgrfLMxM+08bSzfdLTfdFYu40s7M70vcqs7zeQx-HbBbcco9EfC89TazfIkXMXKPRcvQUJZMqcpI7wl0pQ7skM1ourR8-Mw-NnGsyPI3CHYzECisp8ttP9a8zgr4rzbcpswgow7dUnUwoJecgXT80zfs0fA-SrZIj9djcne44Cr8yc2-bDa3DddjQ3DC3su3IwrEr3Ltd84o2CuUr8+0hi7tAjDtN8rfRs9i704Suoj43oodVkko9kjjIwv9SC6tadRwmi-ik0iAfCgQ8i2ot5adW8pojIssoJXMivL-FHXLAglXKknSiyishiwsoHAgpQ4M8yjY5HTivknCrtSPMyvElvJs39Aytg-PMDBo4KuCvQJ-IwuzJPFi-9ICpynylcmQyioHJHJQwi2ivSoSr-IjezI8+vHzHg9K5S6SsiojJXJHAUm0gqm00U-nHbcI9jRwnMi-UKi2IJOdC2H8hY8ijSzjadNC7qkM-q1LC2KyvAdE7dTEmgr4xLAI-E-Oaas+Csha6fP-FK-TJvKagalsna9fZAr4vw5w9avqgaki9EtMm3TfGAk4zai2Sc9Eg4os9jd8xEpSjagalcj6iAva+S9dNi16+0oG6rGg+crdHq4zV6704auquEk-es5cnbBGudULNEy4pKrQkc-vOreGg7TatLVqkPP9brbK-CgLRS7yy9Mmua+6goxaz4-9NHEKrG1LVrCm6o7zdcpHespxAI7mtLE6y4ws17djecyqrm0m7Gu6kYpIyC0SpQq9TGhWnmycxC7-T3TQ0JBvNYnssmlc3WgKljJHH60WrWtLXc8CjEpknis-U8xm7G888Cwy5K2zd88-I61LLHcrf7A8r62zSPXE66za2nIOibNmvDPA-vPilw22pxOaxCj3LTTQntUQry+WqHKOhCz2vYyAsDRwu3TW-OudJxFs3Wv9LTJ024odd0v6m6gOki9Ol5ZA2MsXO8-20rHWh2uSxkn9eckWkmyugOs2oum4kS9jUy8Gqu+2k7As79SUmW-9Zuqq-6gOj25eyk3kjSs+SYhe1LMvGOyzYQmLCIgrP2re1u1rH89OkquEvzSPJOsW4fQTBi2ckuhzX3BM7e1rFyjQmekcnutwiu6nTaqzRKmzYeu3YjK63q6BkimQuw7dTsrcl6udD-L+r-Kmjs9eodOGlu6BzKsil5e-F5YyordtG2ie1rIqxAzQoE2zBygB++9tIwh6nooJNCw6hmwB8gvBsAjOmLeQlaxyvOqBudZgkRxIzu0OhBqI+hmR1Lfg+R6vK80+ds+oje12oR4B0Rl5XDTQuMyawR++2Q7C63H+-kjejhzawwzRifIQgo7bGTSSpx+ir-MS7210scvutwvykw-Y8nCB0h2Rphyg1evChygxqxmq5hmsx-Fa36yxzarIlxxi6448odNK6RyjTJn8tB0Bl7Qa4+7BiAatakSgP8Ygea5Wsq1rYGtLALJO6669N5Wp8gYgBphYoLAm5jRLA9cOAp9XW9Hp+pxp14txM7U+OQ6bcw3OzpiDPAKZvpmZpnQZuu6bBvMZtilDdZupzZ4a4epY6bHbcOKR9XSODZ-pppm46MpZ9phJ69Nje5rZymo-F86bI4uZjh69PtT54auvNPZI+wvAdow5r8453ph52ZojAjIjXdadcBwF+KuF6Z0F0wv9VF8F6tcOXE9XULEF5Wl5IXIjPtHrIg7jFurp7pk5hF93MXAm4ygmwl7S5Oxg0rLF055W3Rql6bWlt5nBvl5lkPDghZqbHrL4v4ySrp3dMl2Zv9YnX5nrcwzm1Z1LO5plr56olA8F6l4-KF8EkMrpj5vV4alPFpl7I+-TCO3qrp4Fq15Wvx8F+-B-atTkmF1LKTZV93EO3cC5tFgLGCwplrcTANyVgo5CqdVO0Z-KyxzHGp1114oDLTazMk-Z8ZmPRl+F-Vt9ON4N8YnrK5vQu+7ncVwt+HTdENlp+bDFm9T9aN6o-dAjVVy50Zze7liQ6u6t61uo5+st7tptwDAdx5+zONkdwlpq5NqXS1gt4ai5ktskpQudwIqXF1pd5WnLHbGdqFul+dm9f1tN93RXaVsk8w+miNxTPwid9NzjcF5jPav3BViDVNnd2ZgK59+NlPdo990vfN7F5Woc6Vqhnugp7V4fVtotmzENq9bt0V0vFts9nXcONy1YkZ71nthfJVtDg1+D3a19x1uK0vXVr989o-dt+Nzja5ti1oj-WDpInTIV2VgLdUu+xj7dkD2Z6zCUiFsXAD8c7-B993WyojammKhJxjqNgjt9eZo16KxNyS1o8g5j7zXDNj04iSoi5g5jty5-VOq53N3S-g5jv9ZFlnDVgLYK66tT1DyjkPNy-djlt9dJ3tjY6x2DoDTdJ01O-9rlsjww5jyT0+IjcTHresuW+zsgxd3j93QVjfGzg6jhtTnj-lx9m4-z5w+j8cuZsTkPazSliFuVjd2LpguTpz6o3Z8F3-AlqF2KgStoz9hLkPEEkt+-e1hTmT8owr6oy+kt4y19pr3S9o-ruD+zfjl5xtoioYnz6hnRnzXLitzz9k65ib2t6V-F6LtL6jCjtrmr79PF2jpD8c8OeLzL93IjYnCL5T-TOz3qwYjLiVo7vz5buj1bsjv4zblGkt8poM3rtoqrw7qFl5QHSz+NlHN98clEzbyHlp3-HT1LoilxYDq79rvk4r+No47xBj2k+Hgou7mlgLKRirzkib6563NSqdNvUZo9tbpskUiz0w6zLryDvbjkg7jHwj4nH+6XOj0zsslxS717t9IN6bkn-TBnjYlxF7mt5igmz1oT8NsjlxU96rt9Z5zr07-TKDp7r0ynkxpbjS6XUZoL5r8MzbuO1zwCoHpMzb8Upb7rL1sH-HpTSZ+TuZvkgh1O3HjdsjntRz0Hrbkt+r+3aFoisnR3o-W3gLfXwP7nsX73nTIz7D01937O63m4tnsDHum9ir5cynuwmj1OzjVk8cntDXkP2rm7rtvX+3kHnnuDw84HVOuVzjxn9i1r5vuIoju1gU2TcetR78yn57Z3nH0Z3O7m0C5j7dQHdV0rePpBmf4P5vnZ5L6ulTqprC5j7HxH6bAUjzyOr8pPwtoDPXZI2Penk+uLX7n5tvoHaXxxr8+XgZ0k8DvZxN2-6v3vjB6Vw+gKXLqRNTMTfMXu0TgY+Z0+MPf2ipTn7ZcEcDRTvifz0ro9wBAtcRvG32Y3MtallQnnW1LZL8G+JteKmv2T6K8yqqdaHgz25q+U9+OfaziW30xms7601cKgt1xbWdXEozTmrQNF4K9Y+u1NznEWcK0C3+jzIXOqwTbMC1qyDeKr-2T5SsS2qLC2GhSH4gCgkYA8-iX1La5cBGXfV6j30UEIDD6PdFgbe3vqDVKeDdVYtf0JY3sxas1bPvXUIG3l-Cw-IpgNTIECCp2y3fZu-VtoWx8OmvNwtbjr49ZAKzhTwTNTP44s+enaA9vcSqZnx+Bw1AdLhmszGtzCCfQIeIPTYoslu9XITgEIYanF7+BGaUsjyLayDHBWg4avjWnZ9VzeJ9NLEYPP554PW02Z-J9hIE800BAg4nDlyE6d8xavLULggK65qCEmZNbwe-xuKl9oBJQtRuLRj6ZsEhJrRojUNtpp5rBNmNPnR3MGjDUhytFdjTyi5hsAi0QtLHkKo7xDPWKeCvn3VszODwujAogpZQ8Fu0eadQkYohmKxR02hcQy9vXx669DSs-QgZuDyW7UtpBULDzmLVTqE81h9Xf9lqzkEB1ZhbrOopQIbZQscBE9atGKFMBrQbYqAUiqI1Ya8MtKTbN5ESP4Aki0A5I8fIM0V5P4sG5rKXHgDpH-BuwZI2-ESyYoGkVqNAofFyOJG8imRq+E7kDjZyJ0V+sRMUfSIlH8jNOcJPApHgsZd9r0kcbkQyL5FkVauOWQMrp3pb8ZFRPI0kZKPF68lM6-efQdqz7S6jlRB+AUQRgvY-oNRgHKTE6MtEyEwitZOemkWQ7iYfRjI-kR-zwwRF+8QvEvKFlDH6iKR+tPCitXDbatya8Yq0QKOpY00ESqjWMbegzEyEs61uDxvkxpGfpCxLom1klWnT-NcOAeYNuaL1FWjqy-5eQgVjGafCQsOo8Ub6JdEdCpaFTfTPWJ5ZsZKxYBIDMxifb+Ez8vrLdE2OdETiG8uWdgvORyE8tvRvYsMWRSd7cVQaVmZDj+gXF9jRG7rd0aOXxF9tCRW4hMYkW8wCc3R85Avk6yly0ibxLYwbv-xHrEZfWiI8cYkT+4ddlGU6GLi+ObbHjtxE4xRnhlQr-pVeMeXdP+NXxgteGKuR7hMx7FKiTxzIm1qyxnEOtAOriCCbeJjS+d0yExKIpzxFrESWxrInzLQ3gm6VY8NEv0UfiNFriqJIY98SqN2pjUpirzETteKwmQSFG2I94pHjRFkc28LEl0bnxYxI9-mo3MssPiQngF9SbOIKkD0XwySJxRxIHEjzQoB9muMDVSX30grIEWS7va-KZK-F2NNB7IrjhBjHHcSyK8DJiirnMEVcQCqkiAaNUYHmFGJykzccJJInWiZyLpFPCLU55cMfJ2vDtJF34kfZ3e5BUyXhMIEAF8ub4kKS2KDZfjgJ2GIHvwR8kUs4S8hEsvlwrEuTRGujMxkUU57WNipdRXhqITl5djW6hhRqcOXKb-Np+WtDxDpOZGLcOq+4snuiOCapTYyMrIgVrxPoFcfJiOVnIFQ5peMyCXE7KTIQ7SX9RK-eVqSAKyKmT8au4+yWDjanTUiWA00icXUha1iTRGTajAWKqmJEaeuWUSsKJf5tFKp60-sQUTTLjVJiK0toohMemr5x+L0paQlmmH7cLpULDAfpPYyR5epE9C7tDOrKt9Diy03oWMxRmGt4pYGNCiOLUY-dGpSuJHmXRPoYcUZBDGCVRTuLyiJ6cPeaXUWYrTpRCIwrWmjxRl2NWGouTxr0NkyUzWasZFkpDI5KfSLRIk0iZ23jpgZ6yX3dmUDK+miNteNY2aj+L5mYTxZoUvviYT8xpM8xXwkXtDIv6o0ZuL+E+nLyNmUNFpP6aMVsPzrWQZYQAA">basic skeleton for a Shiny App</a>. The app has both a UI component (stored in <code>app_ui</code>) which is using <code>page_fluid</code> to create a basic container for our UI. The UI object tells the app what it’s basic structure should be. For example, our app has a level 1 Header (<code>ui.h1()</code>), an slider bar (<code>ui.input_slider()</code>), a button (<code>ui.input_action_button()</code>), and a plot (<code>ui.output_plot()</code>).</p>
<p>Parts of our app that are <em>inputs</em> a user can change have the prefix <code>input_</code> and parts of our app that might rely on these inputs have the prefix <code>output_</code>.</p>
</section>
<section id="server" class="level3">
<h3 class="anchored" data-anchor-id="server">Server</h3>
<p>Then it has a <code>server</code> function, which is going to tell Shiny how to dynamically update. This is where we’ll define any part of our app that might change based on user input. The server helps us define the <em>computational graph</em> for our app, which will allow shiny to know what parts of the app need to be updated when user input changes.</p>
<p>For each <em>output</em> we define a function that tells Shiny for Python how to create that output.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import Shiny for Python submodules</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui, reactive</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Import modules for plot rendering</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Import modeling packages</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.naive_bayes <span class="im">import</span> GaussianNB</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeClassifier</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LogisticRegression</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.neighbors <span class="im">import</span> KNeighborsClassifier</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> Pipeline</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.compose <span class="im">import</span> make_column_transformer</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    ui.h1(),</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    ui.input_slider(),</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    ui.input_action_button(),</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(),</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">@output</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">@render.plot</span>()</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">@reactive.event</span>(<span class="bu">input</span>.go)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>        <span class="kw">def</span> plot_knn():</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>          <span class="cf">pass</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server, debug<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="building-our-app" class="level1">
<h1>Building our App</h1>
<section id="ui-1" class="level2">
<h2 class="anchored" data-anchor-id="ui-1">UI</h2>
<p>Let’s start by building the UI. Let’s comment out all our empty UI functions and add them one by one.</p>
<section id="h1" class="level3">
<h3 class="anchored" data-anchor-id="h1">H1</h3>
<p>First, let’s give our app a Title. We can do that by adding a string to the <code>ui.h1()</code> function.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    ui.h1(<span class="st">"KNN Decision Boundary Plot"</span>),</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ui.input_slider(),</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ui.input_action_button(),</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ui.output_plot(),</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="slider" class="level3">
<h3 class="anchored" data-anchor-id="slider">Slider</h3>
<p>Next, we can create a slider bar. A slider bar allows the user to choose a numeric value by sliding their mouse across the bar to their desired point. Slider bars need a few arguments.</p>
<section id="id" class="level4">
<h4 class="anchored" data-anchor-id="id">id</h4>
<p>First they need an internal id. This is the name we’ll use to access the current value of the slider. We’ll set this to be <code>nneighbors</code>.</p>
</section>
<section id="label" class="level4">
<h4 class="anchored" data-anchor-id="label">label</h4>
<p>Next, we’ll need a title that explains to the user what the slider controls. We’ll set ours to be <code>"Number of Neighbors"</code>.</p>
</section>
<section id="min-max-and-value" class="level4">
<h4 class="anchored" data-anchor-id="min-max-and-value">min, max and value</h4>
<p>The last 3 arguments tell us the upper and lower bounds of the scale (we only let people select numbers between <code>1</code> and <code>100</code>) and the default value for the slider (<code>10</code>).</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    ui.h1(<span class="st">"KNN Decision Boundary Plot"</span>),</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    ui.input_slider(<span class="st">"nneighbors"</span>, <span class="co"># internal name for this input</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Number of Neighbors"</span>, <span class="co"># title of input to display</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">min</span> <span class="op">=</span> <span class="dv">1</span>, <span class="co"># minimum number</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">max</span> <span class="op">=</span> <span class="dv">100</span>, <span class="co"># maximum number</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>                    value <span class="op">=</span> <span class="dv">10</span> <span class="co"># default number</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                    ),</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ui.input_action_button(),</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ui.output_plot(),</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="output-plot" class="level3">
<h3 class="anchored" data-anchor-id="output-plot">Output Plot</h3>
<p>We’re going to skip <code>input_action_button()</code> for now, and go straight to <code>output_plot()</code>. This function tells Shiny that there should be a plot here. But all we need for now is an id for the plot so we can reference it later. We’ll call ours <code>plot_knn()</code>.</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    ui.h1(<span class="st">"KNN Decision Boundary Plot"</span>),</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    ui.input_slider(<span class="st">"nneighbors"</span>, <span class="co"># internal name for this input</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Number of Neighbors"</span>, <span class="co"># title of input to display</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">min</span> <span class="op">=</span> <span class="dv">1</span>, <span class="co"># minimum number</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">max</span> <span class="op">=</span> <span class="dv">100</span>, <span class="co"># maximum number</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>                    value <span class="op">=</span> <span class="dv">10</span> <span class="co"># default number</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                    ),</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ui.input_action_button(),</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(<span class="st">"plot_knn"</span>),</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="server-1" class="level2">
<h2 class="anchored" data-anchor-id="server-1">Server</h2>
<p>Now that we have the bare bones of an app’s UI. Let’s tell Shiny how to render our plot for us. Right now, it knows there should be a plot here…but it doesnt know what should be in the plot. We’ll move to the server function to change that!</p>
<p>The server function in general tells Shiny how the app should flow, and how different inputs should be used to create outputs. We only have one output, our plot, so we’ll start by creating a function that defines how to build that plot.</p>
<p>To do so, we’ll replace the <code>pass</code> keyword with a function that builds a knn model and uses <code>plotDecisionBoundary()</code> to create a graph of the model’s decision boundary. Notice our function <code>plot_knn()</code> has the same name as the <code>id</code> for our <code>ui.output_plot()</code> above!</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">@output</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">@render.plot</span>()</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="co"># @reactive.event(input.go)</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">def</span> plot_knn():</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>            <span class="cf">pass</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>First, let’s build and fit a model. To do so we need to:</p>
<ul>
<li>Load in the data using <code>pd.read_csv()</code></li>
<li>Create our <code>X</code> and <code>y</code></li>
<li>Create a Pipeline with z-scoring and KNN steps</li>
<li>Fit the model (we’ll skip Model Validation for now)</li>
</ul>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">@output</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">@render.plot</span>()</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>        <span class="co"># @reactive.event(input.go)</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">def</span> plot_knn():</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>            <span class="co"># load in data</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>            infile <span class="op">=</span> Path(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"penguins.csv"</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span> pd.read_csv(infile)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span> df[[<span class="st">"bill_length_mm"</span>, <span class="st">"bill_depth_mm"</span>, <span class="st">"species"</span>]]</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>            <span class="co"># drop missing values</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>            df.dropna(inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>            <span class="co"># set X and y</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>            X <span class="op">=</span> df[[<span class="st">"bill_length_mm"</span>, <span class="st">"bill_depth_mm"</span>]]</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> df[<span class="st">"species"</span>]</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>            <span class="co"># make empty model</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>            z <span class="op">=</span> make_column_transformer((StandardScaler(), [<span class="st">"bill_length_mm"</span>, <span class="st">"bill_depth_mm"</span>]))</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>            knn <span class="op">=</span> KNeighborsClassifier(n_neighbors <span class="op">=</span> <span class="bu">input</span>.nneighbors())</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>            pipe <span class="op">=</span> Pipeline([(<span class="st">"z"</span>,z),(<span class="st">"model"</span>, knn)])</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>            <span class="co"># fit model</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>            pipe.fit(X,y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we’ll use the <code>plotDecisionBoundary()</code> function that I created and loaded to plot the model’s decision boundary, and return that plot. Returning the plot is important because whatever <code>plot_knn()</code> returns, is what will be displayed.</p>
<p>Notice that we set <code>n_neighbors = input.nneighbors()</code>. This tells Shiny to use the user’s slider input (with id <code>nneighbors</code>) to determine the number of neighbors in our KNN model. This also tells Shiny that any time the slider value changes, so should our plot!</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">@output</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">@render.plot</span>()</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="co"># @reactive.event(input.go)</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">def</span> plot_knn():</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>            <span class="co"># load in data</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>            infile <span class="op">=</span> Path(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"penguins.csv"</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span> pd.read_csv(infile)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span> df[[<span class="st">"bill_length_mm"</span>, <span class="st">"bill_depth_mm"</span>, <span class="st">"species"</span>]]</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>            <span class="co"># drop missing values</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>            df.dropna(inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>            <span class="co"># set X and y</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>            X <span class="op">=</span> df[[<span class="st">"bill_length_mm"</span>, <span class="st">"bill_depth_mm"</span>]]</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> df[<span class="st">"species"</span>]</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>            <span class="co"># make empty model</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>            z <span class="op">=</span> make_column_transformer((StandardScaler(), [<span class="st">"bill_length_mm"</span>, <span class="st">"bill_depth_mm"</span>]))</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>            knn <span class="op">=</span> KNeighborsClassifier(n_neighbors <span class="op">=</span> <span class="bu">input</span>.nneighbors())</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>            pipe <span class="op">=</span> Pipeline([(<span class="st">"z"</span>,z),(<span class="st">"model"</span>, knn)])</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>            <span class="co"># fit model</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>            pipe.fit(X,y)</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>            <span class="co"># plot decision boundary</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>            f <span class="op">=</span> plotDecisionBoundary(X,y, pipe, <span class="st">"KNN"</span>)</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span>(f)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="decorators" class="level3">
<h3 class="anchored" data-anchor-id="decorators">Decorators</h3>
<p>You might notice that we have some weird lines <code>@output</code> and <code>@render.plot()</code>. These help communicate to Shiny what our <code>plot_knn()</code> function is doing. Specifically that it is creating an output, and it’s going to be a plot.</p>
</section>
</section>
<section id="optimize-our-app" class="level2">
<h2 class="anchored" data-anchor-id="optimize-our-app">Optimize our App</h2>
<p>Now that we have our UI (how the app should look) and our Server (how the app should behave), we can run our app! But it’s pretty basic, so let’s do <em>two</em> optimizations.</p>
<section id="slider-reload" class="level3">
<h3 class="anchored" data-anchor-id="slider-reload">Slider Reload</h3>
<p>Because our plot, <code>plot_knn</code>, relies on the users slider value to render, it’s reloaded every time the slider changes! That’s pretty annoying. So let’s add a button that we can press to re-render the plot. Once we add it, the plot will <em>only</em> re-render once the button is pressed, not every time the slider value changes.</p>
<p>To do this, we first need to add the button to our UI. We’ll do that using <code>ui.input_action_button()</code>. Like our slider, the first two arguments are an internal id that allows us to reference the button state (whether it’s been pressed), and a label that tells the user what the button does. So let’s add those her.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    ui.h1(<span class="st">"KNN Decision Boundary Plot"</span>),</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    ui.input_slider(<span class="st">"nneighbors"</span>, <span class="co"># internal name for this input</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Number of Neighbors"</span>, <span class="co"># title of input to display</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">min</span> <span class="op">=</span> <span class="dv">1</span>, <span class="co"># minimum number</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">max</span> <span class="op">=</span> <span class="dv">100</span>, <span class="co"># maximum number</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                    value <span class="op">=</span> <span class="dv">10</span> <span class="co"># default number</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>                    ),</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    ui.input_action_button(<span class="st">"go"</span>, <span class="st">"Create Decision Boundary"</span>),</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(<span class="st">"plot_knn"</span>),</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we have the button, we’ll add a new decorator to our <code>plot_knn()</code> function that tells shiny to <em>only</em> run the function if the button has been pressed. We’ll do that with a <code>@reactive.event()</code> decorator, and give it the argument <code>input.go</code> to tell it to wait for the button to run.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">@output</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">@render.plot</span>()</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">@reactive.event</span>(<span class="bu">input</span>.go)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">def</span> plot_knn():</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>            <span class="co"># load in data</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>            infile <span class="op">=</span> Path(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"penguins.csv"</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span> pd.read_csv(infile)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>            df <span class="op">=</span> df[[<span class="st">"bill_length_mm"</span>, <span class="st">"bill_depth_mm"</span>, <span class="st">"species"</span>]]</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>            <span class="co"># drop missing values</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>            df.dropna(inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>            <span class="co"># set X and y</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>            X <span class="op">=</span> df[[<span class="st">"bill_length_mm"</span>, <span class="st">"bill_depth_mm"</span>]]</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>            y <span class="op">=</span> df[<span class="st">"species"</span>]</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>            <span class="co"># make empty model</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>            z <span class="op">=</span> make_column_transformer((StandardScaler(), [<span class="st">"bill_length_mm"</span>, <span class="st">"bill_depth_mm"</span>]))</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>            knn <span class="op">=</span> KNeighborsClassifier(n_neighbors <span class="op">=</span> <span class="bu">input</span>.nneighbors())</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>            pipe <span class="op">=</span> Pipeline([(<span class="st">"z"</span>,z),(<span class="st">"model"</span>, knn)])</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>            <span class="co"># fit model</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>            pipe.fit(X,y)</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>            <span class="co"># plot decision boundary</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>            f <span class="op">=</span> plotDecisionBoundary(X,y, pipe, <span class="st">"KNN"</span>)</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span>(f)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Amazing! Now our plot only re-renders when we press the button!</p>
</section>
<section id="loading-in-the-data" class="level3">
<h3 class="anchored" data-anchor-id="loading-in-the-data">Loading in the Data</h3>
<p>Right now, our <code>plot_knn()</code> function loads in the data every time the plot re-loads, which is unnecessary! We only need to load the data once. So let’s move the data loading code up to the top of our file, outside the UI and Server functions.</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import Shiny for Python submodules</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shiny <span class="im">import</span> App, render, ui, reactive</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Import decision boundary function</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> db <span class="im">import</span> plotDecisionBoundary</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Import modules for plot rendering</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Import modeling packages</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.naive_bayes <span class="im">import</span> GaussianNB</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeClassifier</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LogisticRegression</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.neighbors <span class="im">import</span> KNeighborsClassifier</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> Pipeline</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.compose <span class="im">import</span> make_column_transformer</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co"># load in data</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>infile <span class="op">=</span> Path(<span class="va">__file__</span>).parent <span class="op">/</span> <span class="st">"penguins.csv"</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(infile)</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df[[<span class="st">"bill_length_mm"</span>, <span class="st">"bill_depth_mm"</span>, <span class="st">"species"</span>]]</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="co"># drop missing values</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>df.dropna(inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="co"># set X and y</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> df[[<span class="st">"bill_length_mm"</span>, <span class="st">"bill_depth_mm"</span>]]</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">"species"</span>]</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>app_ui <span class="op">=</span> ui.page_fluid(</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>    ui.h1(<span class="st">"KNN Decision Boundary Plot"</span>),</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>    ui.input_slider(<span class="st">"nneighbors"</span>, <span class="co"># internal name for this input</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"Number of Neighbors"</span>, <span class="co"># title of input to display</span></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">min</span> <span class="op">=</span> <span class="dv">1</span>, <span class="co"># minimum number</span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">max</span> <span class="op">=</span> <span class="dv">100</span>, <span class="co"># maximum number</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>                    value <span class="op">=</span> <span class="dv">10</span> <span class="co"># default number</span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>                   ),</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>    ui.input_action_button(<span class="st">"go"</span>, <span class="st">"Create Decision Boundary"</span>),</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>    ui.output_plot(<span class="st">"plot_knn"</span>),</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> server(<span class="bu">input</span>, output, session):</span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">@output</span></span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">@render.plot</span>()</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">@reactive.event</span>(<span class="bu">input</span>.go)</span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>        <span class="kw">def</span> plot_knn():</span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>            <span class="co"># make empty model</span></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>            z <span class="op">=</span> make_column_transformer((StandardScaler(), [<span class="st">"bill_length_mm"</span>, <span class="st">"bill_depth_mm"</span>]))</span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>            knn <span class="op">=</span> KNeighborsClassifier(n_neighbors <span class="op">=</span> <span class="bu">input</span>.nneighbors())</span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>            pipe <span class="op">=</span> Pipeline([(<span class="st">"z"</span>,z),(<span class="st">"model"</span>, knn)])</span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a>            <span class="co"># fit model</span></span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>            pipe.fit(X,y)</span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>            <span class="co"># plot decision boundary</span></span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>            f <span class="op">=</span> plotDecisionBoundary(X,y, pipe, <span class="st">"KNN"</span>)</span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span>(f)</span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> App(app_ui, server, debug<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And our app is now complete! Play around and see how changing the number of neighbors affects our decision boundary!</p>
<p><a href="https://shinylive.io/py/app/#code=NobwRAdghgtgpmAXGKAHVA6VBPMAaMAYwHsIAXOcpMAYgAIBJGVYgJzLoGUALASwmx0AZmzoAFbGW6k6AZwCuAIxjEAJvIA2cWQB0IQ1sRhy+Aur2ZsOAQXR46rSqrit783vcdRCZXgDc4PQMjOlQoKQ1eRXNLdnFw7j09eiYWOOdCXlleGUVieQhVKFZBIQKfHIggw2NVaIs0jlQNYjIAEThM7NIAIXzC4uwkiBTYjhV1LVlhUWbWhycXfgBzPQarOgh5ZkEoaYhUNbG6GHC5skjFLGxzuj3QjTIjxrk4KDzWCDvp2QhdCHWcTCA2m91QqmGoxeEzgkQgy1C3gA1lBltpqiFZEitMUIBhoP44AB9RRQbDaGIvADiUHksmyUAgADkehjjFicZ8MGRHHBKRsOl1KgAVXkAYQ0e2yQl4LjZcmxby5cKVRJhGn5cQAMsRlllfIQAEpwZaOemVeUcpV4iBwXjLbgfaaAjgAaSZdodTolUt4Mrl+hqCs5eNQjjDxEI2my8M1HE4ZEZRVYqk4hCgWlYw2C7MVuKwvFQsP4fJd4kLxdtlrzXJIllkpeOpyRxJIGm2ECJPMZshErHgWaqIzoLSgqnMXyKibW+l4WjoAF54lIABREokyrTrgCUWGKlA4AHo6DowEX4e4-hhCLI-Ke9KohIvQqoMF5VESb34V-xN3Btw+T5Lo+wDAKeihzhoRJaPCUhqjAp72OBkFEs4qBwTACH4CeYCyEWmTomAAC6RGQnQqiGKgJxZDGCJ+Bm8jooUQgYBRxCoNAP4HJKUbPqKjEAUO9ANhwAAadyFHQQwQOJwFCKByEaFBMHLBhWFIWAEFKahcDodw8GniReiCHJYG4fhsq6MRwxoKgRLuM+7h7miG7trwqgrnodDeXQTncAAjJ5YDukydCClklR0H0BTJoIYgtE8YDbngXk+U5-CoPIZBErIkTOKwQUQLa9qOmwVn2PQ-AUJ8GabLAfJ9nQUhZBOmVPF8PmdV13U4Uy2yKC4dDEE+HolU6iF0PQvgXHyw2tVlTXEORWTNGSqU9RtPkwPwz7+RV1EAjA2ybP1AabedJxQAAHrtAAMt37acV0WMdWwwANg4XZt9HtnyS7+bdk3kXAQi0o8J3vWdX3dcl62+bwGAZVlRLeL4pAkllZCkEFyzEBNp5il4FBhZ0EUyNFAwlKesMdd5Tn5GQbVEucQXnESSJFdTKUQIJwwPiDrysAEBVI2Q9gM219gNuapDbogcOdQAAhLWUKz5iuOIULhYAlK6CRtGtvBUAQYHAATkFxbUYLj+s9c4T5sxzEB6-LtObfQzZ8nAzBkII6pq91ABez6e5+xDtjAnbdn8fYDiuK4JkmxSpummZ6-YZlacplCqfpmH45pKFoWphnbrb51O8+7qeqVrCyD65r+gVnbFV6ZXPqL+Kt7Xsh6+Xm2oBWz5iBWKorsAQWB4hgfJUF-vYU725EbzbsbfQMrjGosIB11g9FhgG8rqJeDYCvX30LcGRk18eQxYMO+dUBDytOF3QQBTsVHyf9h73AGkhdTB+PlHBkHkJ8FcQh+6dT5tAdAz5bCoBXLZeyHhBbC3sM4RQ8hlgLn4v+MAABfPA4BoDwGoHUa4+AiCkAoFQZAUINgTE0BSRqtxNb5RWM8DYb0cDfE2IcQ60IzgJUuNcW4YJHhcLiA2d4bAvj3F+P8MswIiigmmOCMiqRGFbzhAiMIhAURon+DmYM1p8RQEJCSMkFIyw0jpAyZkrJAyYhrHiHkcBGwvFfiKcUkpG6ykHCYq0+YVTFDVDouMdAdR6lkAaY0ppowWmcbmEM+Ia5OkidXMaZUG7SgCdWVJYZdKGCjOaWMZZE6UxThmAMBSzG-xVJEkeRYVR1PzHWFgDZImhzbB2LsrAeyxwDPbZ+7RSZvw-oMI+U4T4zJOGoew6ouw3H-K7OG9A6wQVtHQcSSYpLkXCFAOGokTIvmvKQdMZBx6iRmdgKcRF7DXRav9M+Pl6CmneA4RkaIhpPh+oxaYrCEpwyurdIkAz4R-X4RgOEeFvBwBXNtZ2NzwiIxaIQYAiA8C3WXnQAAtHQAArNzaGpKnrTNRXOSMmLsW4oANREvsG9O6t1+5XX8uC75UKDgwv4HCqMiL+AUrIGi6lWL-K4oJcSoBpKtrXWFaKjF4r6WMohiy-u6y6Bog4BmDUnTsiKHnCwKq0wZAfNQIkN2oLnw8vDG8K5oLOWQrwADe6bL-I2swL4LQK52VOrRC6+6rKQVElNO5Z84IMBtEOQAMQGfAFcIAUUit6ZHWQwAcWIDoKC+wybzkRz+MACVWb2UENed5C+jhVC8B8HcJSdBSQGNNP0ccxryD-E6lRJcEwsBVprQ60NrB3JssHe5MyhxiIRuGJ1C+wK3YymWI8m6S5mgioUIoc4vdy1SWmEuHlBReAAEdGIrjueEbcJ4hwzteBwNsswalkAoHDO9ddnxmRoAAJgAGwABYv2EoAMwF0-VAAAnKoAAHEIYDcBQOED-Uc6ybswhaEfVCkA2B028CIlml9WGiIzFYOYCcXzIUrhgqe2QZcCHTreQ29wGhW1zs6o+kOOjllFjoAy08JMhTkxbffMAcNb6SSXIojAshLnVRZsunZU580dnTTi+wpy82psLRKklsqvrcEYs+U8E6l3Pmuhgw5z4rqjtUI8jQFqoDPluhgPaMrtO7tVVoNEom6AxozA2H+D7iYrv8-+YTLbnzick+EaTutZNqfDopjNDz9lLliwW9NmnnPad01Cs9Ys7iyZMwcxMz4Tl+dQwFxEZXgtuxE6+ESK5prziXI+-uNWYUmicORyMC4ADkUZyCDS0EIMg3X7CKDyBZrGKMICEGkKwBcK49p0Ac4SsucNaPeRAWA52C7tyEOIZAeq1BzzLEvLIa8t4qEkH63Q-AeFSbaDwFkSUhQ8BZ2gjnNSr2i66U+0ISI6AXDvdgnnGAr21DYDVFKUNeAGxXRPkqPQD1rDOEiH-YUbA0R10oHgADoHHMuogxgAA7AT-yGAHoAaJ4ShzD1ThaDwB++6RO9B7WR8WNHGOXANggDjvHxL-JE4wD+gnX7yc44g-dMXQhvY1IZ0zvQH68Bs9R3gdHrBMfc7wD+hzAGCdi-8qBwlYuAMfup1LmX9PGe3WZxAXXyvZSq851jnneBXeu6tzb4X9uOfq659jgDouScG4wLrg3AHjc-rNw9aXdO-4e70MS73jvffO95yHuXGAv0utAzTnH-7c+x7l9bvQWek9q41-7wnoGXWC4g6T43X7Tfm8L-HiAJOy9O817jjAivg9Z4N0bh6f6qdi5b-LiAdeO8p67z+-H-lCd7TDxHkfD0i82+r1PivPOf0frF4znv2fc876j+78fAMlco4d+Xv3PPKcYDrwLufEHRcU4A5L1frf-Ks8vz7rfOPa817p7z656U7v6n7F4QD+SK6b435a5k6L6C794Qa74U5W7N6y6f524-7J5-4AaE5Z4fpk696gZk4U4S4F4YFn5e7YHX6p4Aaz4EHwHZ6E5D7a4UGW5n6J40Gd7+6i794AHz6D7-5gEx6UEQH+Sl7cHT6V7E7Z766G4R4n6iEcHiHt5SF-474YDEr75B6gaC5D7U7sFx5n6T7qGwH0FC567C7z6z6v5N7R4W7GHiEb5mGp5-p75k786ga2Fa5oG05iE26M4X7s54A9BZAkB-x34P6E6h5E4+H0EiGOFr4K7f4hFhGSbECRGC5B6E45EgFfpgFj4QEfrQHYHpERE45G7V7B694QZ45kGJFFGBFYFpHhGZHi4H7z5P5CG44n5NEK7UGtEZGRGE4P6C61EgHkGj4BEK5cFDEVEAZG6h5V4E76Hi6NEzEQDfrBEq7lHtHa6Z565IHh4U6Ep9GbEfpqHzH7HLaAHVEQZrEm4bEqGBGmHXFZEYD3GHEC4oE47+RKFJGt4fouHvFa63FdH3EgGG5GHJG25I7YFtBeCg7d786B414sE46m657KFOE24AapEq6IlvDInjF64IEYm46FGbEm47EO5EmwBp784CEQYUlv7YmAnj4AYtGElIlgmfF673HxE54wmt70G0l-z0nImi7WFrED7G4m5CE4mwmLHil4CSlp6K6EFz6gYv5wHnEvF6AB6qnql4H34Z4PQG5Qn6m4mGlXE8nEm+GdGE784S7G5nHsn9G25vH2kMl379547LGkE45snoEGm24gk+nIl44P546L4QY+F-rWmwna7Gm8kB5aF64WnIHG7-EembE-oEl0m8kHHRGWFykU7CnTFhk76pkOnplZkZnz66n4nPE2kQA-rclFkOk-qz6L5466G6k9lUnVmDGRn-766i73E9FBqhltmR61m+l45IFmmWli5-rDlzmSEhHqkFnan67ZkU7H5Vlzl2ldm+mC4un8kC71EM56FCHJnelnlSn66C7VE56KF5nVkRlPmOm65anEFBkFlJmt7U6ql7GRFLmAE5HNmGGzlF4QYJ6Fl-zgV8lxlXkslrkhn+EqEIUQCEqlGgmLEvlXnvmHkAlFG4WAZgVtF-yaEWl85F5rm3TAX3SUWjkO4oUWGXlxlrHAmtnwUJ5zG7E0VwFln4HZ5BmgEimsUJ5bnCXDFp4WkXki5unkViGUWnnIUiUHHLkxknHrHSW3SUWPlaUKXpmonfEQZBkfoQZqU4UJ7fmmULGIFyF9nxFU6GW4UFHUVmVG5B6TkE49G5lwVW5eVIWhHaVk5-lMHlla5sHHkCUQCN4+XOXfGym2UN78WhUl6dlOX7ExWE7EG-Ha4sVGUl7sV5WRHSmAFxk+E2V2VOFeVCUcWRWWXyG-G9GeUl5yUtW+WNmi7EE9GLGfmNUl6aURUKW7l9lP4YkFkbmJVfomU4HmFVEup8GH7G7MUjULWOXLVuFk4xllmgazWR5dVt7wkhG0Fd7h5eHyH5FZUyVt7hVXX+79lWEbUVnzXZVt4EUq4vW36QWP7EEwUNWJVE65V7Wa6R4rkrEG5rFAVnVxGqn-WVGNnKWrkU5E4PVlVt7NW-6wGaGlleFCHH6I09X41uEObVGi4xmSVY3bXfVE7jUo137EFiVClfWPVE5LUs0DVrVP6PHukhVc27Uo2aHTV9kk0znYWjUT4XV-U8G34MGAG1E3lPEM2PVWXI2K2OnVEuUG6Dn00JXfXIHa3SG35oldHRGPFTEOEUV6AQYQ0s1G7TXWGgb6U76c043xkLkklAECEkHymg0m141qnFlRUZ6h7eGqVnXP6+155AEMUY0GXG2a3jUmkBVdFIFq2wV23qUO1LUmkxFyGq3G7Qmp3e27VF3oUrmkV57Y24U57x1EU5F763QdVC1532UQAkHx1TVkly4k1YV4D2092-U-kWFKXdER4N16Du3N2A0L4qWsGlWN0VVh11l82P7LGPHD1KnfWG590OalnV6M6zXD2j06nN1L1Z0fXCEa0416FH1AHOnZ6DnDUV2N2F1pnh6L6i7kl76Vld2y2gZV3Fnh61GNmgbFWuqf0s73QpXtFEVT1vkdVE72F4D733SgbwPhUoW7kPT76EO3Qe3oNCFFE4OQHt2IMfH+X7n6Vv4r6YMcm3SUMAwQ2cUAFEN32k0V1sO3Tr2cM13+n6XAkYNYOsPwOh2cVvUQkE7xGd0j1iH8Pk0TULHiVA3Z5q0eXC2SNUPjWcWFXml32UmGX8NLWGNz7pWSUC6KksP8O7X4MQNyH0Xw1M3kPKMs7n5J6WN-1QMUnIF2MUNeN4PaVG4EE64SVrkFFmNePj2VVp5B7ZHZ4MN+HMPBOQH+QcPaW75s1eHw2XEeMqFsP+SCMiXd4ROyEG6SVAPpOeOZPSM5NVPF0G1MVMMZNf6qMs0aPpUYl8UP0lPM06135-ngmgPG7uN8NeM83DN+WAFZlq0f3ANF4lOi0639233z6LMYMdNBEwF0Fb2knz6PHBXLNW5sOEFm24HJPB4xkUm51KPFMs4lFXME0Oa96ylE7NmnW6MXNO3rNk7WGv2M4dUPFFNOEXPr3O2dGrVNmbXB3YPPOh1i0Ob+nyE3lsGxOQHbH7Nd6jGAH+mSWFO-PPNDPm2iWXlR1D1e0XMzPkvd5T19mSVbUkvYtrPks9lP4eFH7S2PMQss5v6vN0Gv2P5vkgEKmstZPPXrO-0l3Z6C00sCvxMb2+k0165eEMMPMSNsNcnN3o0ivjOsHtP1NZPr3V0IGWWPFHlnOIuQEqlJ47kxXo112mNTN2uqMmnhOAFeE2NMPasCvp3FnvMZ57RpO47GtPN2vf11mymi4uk9HxU2t6NZNgN1myOvkpNrlYluulPy0-kHEfPakMOJt1ORulPhU7mosq2rHL7gsrMs41kOtpm76L5G4ukUkstJtsMdnP1JN3UTM7Mms9l6tAFqsG4dW8v+uQHzlNtpv7nNM9H545t-oL1OnfF128My31vTuBub1tVAvxE-p+v2MNvRuqvEUxkJsIvJs-qpvnkw1FsTOlVsOgWzvnuMs1uY3Y0vsVvh2NnAu3SAW8sZMPRUgHjEDEBqP7H-0urOOEGAVassM257RgfkAQdQd-wn4SHp4fpv5i6EpG1btAl4CodYyQf4O5Euq9kM4Axrk-NJt4kkfgfkciVYdG6aldEPQEde2e5MdocseTX62z7aH-H4cluenEqkfof4NxuwcZmEFH6KMSM25Z5ScCcVHQ3WHK3wdrm22lttkk5qcYda6W1LE0c3n4U8cO18dkfGcdlAHh7C6M4YslvKdz02fSfaVjtG5OeidcenN8uwnn5Gf4NU1yck6EEJlLsMdeMefqf7E3nYehvYdceKOelQFxd2dtvhc0dRfXvIe64hfaWE5aeHGEH6WEq2WGXIfC5FeTVG4P7ae0dD5pNueQGSfMd2cBkupzOEFrGVelXIeqedf4O-FZPyfNd6kP3IeGcjfaV4697scM5akPRfoX2bHz6ZcyedHCdy4Yt6dtcG5bfFdVMu3Le-GAaDcK6gdzcKVm696z7RUYncfVcpHHf1dz67eEFCGGHTcK6K51caeyelMTce2udIcK6Fe3dA9AENc0c-eduBdAm1fQ-7G77VGyvff4eTsQ9bEdf8d2cweifJc-ewNEfj7bGA-7G7cg-RWDlk-gGBGzcE-4MCFCFY9cfRdI8U915U+0VGO080dH4xO6OBHV5894Bsc4fcNnFXdwnvcaeC6h5mclEXfZvk8QH4kK9o8rmz6amsNrmEf6fKkA+o+0Vncg-aHW7Y-5eGlQ8s+seA28V4ereI+elikS+3ufdmklG56EoBcSO4Uqme8lf81-ky-if5227DcO+TW7797h4RfjdD7l1JtB-M+2f4Oz4yk4fB5cfq-c8414Ha+0U+HjcRPn3XtB-i9m9a6UeicRdGX4dLOF+4Upme+75B6J9y4Ump-G-fUFkl9a6A26klE-dG+j01me9mfjdJ9H570sNt-2+Z-zffHs8pda46Ma9t8o+x8VFm786rWq-4dpdR-zme-h4J-8l9drm1OB96ArvT+Nnh6n2Tee0P1t8Z+ed3fglH8YOEqR9u6P6XnrX05YY9c+FXBnvf3bI189++xJbqJzrwc9Je63buqBU97rUQeHHI-FV10aUUUOoAkVtR197N8valFU3nAPN7e9fOR+cHqPSooS8zcrbPfP-2A5R8ABQ-dwvzmz40d4ad-RfoJU4FCFROTnGXm73YEx8V+k1cPA-hf499MKs9PCl-3i5UDD+LAv3mwLQEgDKBWuZxpb3kEr0P+DlIfmbmsIq8P0PhWXmdW8pP9Q8Mggwb4UUFfoCBOg9wg92v4rcUBZAkvBQKkEac5m43V-gmToFR81uJgx7j11kK4cgyhKLnqPV-RCDdeB+QghiyN7QD-0nA6MvzSQEu9JeE-UIZIO-4w93BvnPLrngWrKCuu-VZIcCXw56d4h2gvwfsRupUcahR+NIQIKSqwCmhmHBzEHnZ64cT+q9PQFjU4E3N1+htKviMJcE9CTOZZL1iURiGaDZa6DTgQLwWGeD-e3gtvMvyKHQdGys+JAY-nz6KCkaGA+YR4UNqnD8esw4Ad8VH65DKu2wr5mMIOHJCDeQ+EXmnxGGVCUK-vOfKLnD654YmiNRoXsKoG957ByAo9lMLbzdDwRWuBAdVRKIVc++o9CXJkO94idiqjeIJvUy1qMDd8agggpsPo6F9KGptT3oLlK6MFiqZDVlo7RMG55ROp9Cwc32fYO1d+tw2fOAKOF0jr2FIm4QiLNxjFpez3L4eSIdqFCVBugssjwMIKzUJRU7B4iYIjpYCaOz3VAfywnxgiZRR7N4YQygK6dj2GTOoiYJbbzMGcjw0-pGybpUjGy6-Wan3yna91CRnRQXKGxspidFWY9RIdwIm78iBmc9XYXqKTowcSilguIfU28KcCaes+JPgmVwFds56QomUSKMiERdv0+HNJhkyvqe88cZgn3hv1vaDtbRvwrzleW04lFjReI20bqLs6h8QeTnEhtE3EYnse68ItMTFVk5j9sxHIqhjd1cEit1++3AUbgxMGwteKXoznj6IBi+CER+oxbhNxJp3lJWJDTEcwMIbTjJeDzDpgI1eF2CixhtDBtuwBipjCeK5cMX5x3Gzjbo0ouzmTiDzxihehvb9vA3LF3dHOkQo4RZ13EmsjKnA8PKHjqpN8DCJo-8Z2IbFz4zuznE-rOOC618D+kQjjrqV+6Ssv8mIh-H-ws5oiTWGXC-g6OSHJ8TOY4zJiGOM7-CLKf5a0fBK5ELit6xA44boPAllt-iE4gEXvkeFJjJRmTe8Vn0IlJ94aYLMXKeIFxrDLxNQ34iCJzabd7RkIqISDxT5tiOmR3CXm7nAIXNBxtwsdhEOhHcSp2UBGYcKIcyFjMxF3LfjxKgLzi9RCAw4TRzV5vjsW5E-Bnjmpr45yu3orFg9DFCmBYkAyVACq1BxcC7i2eDutjWQ54AfJfKbsAFPVJYck6OpMulZy2KRTfJMUwKZLzVELdM2FOKMWGV1xRS-g6Uncj5z1w5F7myk-MqlOin+SMp+FKplkLhoDs62IFaqUVNqklT3RtdXvrbySptS-JaADKe4TQofMKSBfNriTkKkDTYpvJf4csU6J6En2r3CfP1OKnFldScjWKgjVF7ucppa0h0nNLkJvkKS+QsMufj2kdT1paVWugwwO648MJF0waXFMfGR1s87lCNm2Qy6PSZp3ZT5i-R6IdD0uBUtKZdIOljcl6jOIDnL1KarTQZDJaGnrW1IgECOtYz6cSm+l1SxmZXQDkxWhlZ4MZcUyJtwyamv5kpYkgmbNIxKP5oidNcKSzjrwUzuy1VTZi6zJGHdq8jM+GdlK6KDU6OyUoIpzKCm74c+gZTKn9y2J7RBZdfNGlA0kqAC2yLzKWfZ17yYCHigDOmVsWBk1Snps0qtsHjdq3T+ZwuJWZbQzaxUuSGs03LDJ1lgz5C8heGgF09LbEpZSEros2JAIhDu6lxa2T9K5lQM26kxbYTZR9lDTmZAdWmUYK2IcyQZNshkvVKQG55GcJNG0bLUFZKywu2HJAo8Va6dCteLsvXhngTmAUtRiVGkkrKJH80ciu9WEbqxdlBkracuD2gz1HpiklZsjDRgoVynbCVSSs9GmO0Na85FBRpXuW1SpbG59JucyaTHN9mg56pxDBSTgO7kMzp5ocq8pgOgZ75AZUfXHCHLiktDg8p9ZimuT-FADvJK8ncolwYoKcy6ww9spLPPlXTC2LpR4lz2gE1kXZGc2Mm-RjpwN2yWs9qbHKCnZcmJrTU4ooOHYfyryZsxKblJYnaj5ykComnLkApkiMmK7SBRazFYz0gx7ZKedrJnnD87ZtIhQVi2AG7zZpnhMqZ+0xL9jb25C7so1KV7MEG8cC7dqBSVk31mZA8rkpVMjb+96FccwFi42QU3ysW+FARUAqqZMKl8XcnBVRUgW6EohLYofOIL4XGyH53ZCudvWoVclSJZxCRZL1yZ64YyVrfsbEIMXQ0VZ67IlnorwUAKCFXvKOtf2UVgkzFy8-BZjLXYJzQWPowlNHI8WdS0WbtBRrwu1HeU65JFeTneNEVutnBFisdsDzqIN5SJyVJWQENlKdy88KS-+dNLqlw9bmcueGssO3YJClZ+8iGe3WwWssMhbctqsQQYaTMNelDL9PjI0Vxzj6wi6+UPmbn1Mv0di3JYTLXa6ETprC85oQiIhAA">Full App Code Here</a></p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>